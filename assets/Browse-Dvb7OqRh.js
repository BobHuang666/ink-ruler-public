import{d as R,m as S,l as y,O as B,M as T,n as j,c as n,a as s,e as a,w as r,r as u,b as p,F as C,x as U,g as P,f as E,Y,j as $,D as f,o,L as q,_ as G}from"./index-DuIC7plb.js";import{b as z}from"./classic-l3kYh4Uo.js";const H={class:"classic-browse-page"},J={class:"browse-inner"},K={class:"browse-layout"},Q={class:"filter-sidebar"},W={class:"filter-card"},X={key:0,class:"pagination-wrap pagination-top"},Z={key:1,class:"loading-wrap"},ee={key:2,class:"list-wrap"},te={class:"original content-font"},ae={key:0,class:"translation"},le={class:"meta"},se={key:0},oe={key:1},ne={key:2},re={key:3,class:"pagination-wrap"},m=20,ie=R({__name:"Browse",setup(ue){const N=["先秦","汉","三国","晋","南北朝","隋","唐","五代","宋","辽","金","元","明","清","近现代"],l=S({categories:"",authors:"",dynasties:"",genres:""}),d=y([]),_=y(!1),c=y(1),h=B(()=>Math.ceil(d.value.length/m)||1),A=B(()=>{const i=(c.value-1)*m;return d.value.slice(i,i+m)});function v(i){return i?.trim()?[i.trim()]:[]}async function F(){_.value=!0;try{const i=await z({categories:v(l.categories),authors:v(l.authors),dynasties:v(l.dynasties),genres:v(l.genres)});d.value=i??[],c.value=1}finally{_.value=!1}}async function k(){_.value=!0;try{const i=await z({random:20});d.value=i??[],c.value=1}finally{_.value=!1}}const w=y(null);return T(c,()=>{q(()=>{w.value?.scrollIntoView({behavior:"smooth",block:"start"})})}),j(()=>{k()}),(i,t)=>{const b=u("el-input"),g=u("el-form-item"),I=u("el-option"),M=u("el-select"),V=u("el-button"),D=u("el-form"),x=u("el-pagination"),L=u("el-icon"),O=u("router-link");return o(),n("div",H,[t[9]||(t[9]=s("div",{class:"page-bg"},[s("div",{class:"page-bg-gradient"})],-1)),s("div",J,[t[8]||(t[8]=s("section",{class:"header"},[s("h1",{class:"title title-font"},"分类浏览"),s("p",{class:"subtitle content-font"},"按分类、作者、朝代、体裁筛选")],-1)),s("div",K,[s("aside",Q,[s("div",W,[a(D,{inline:!0,class:"filter-form"},{default:r(()=>[a(g,{label:"分类"},{default:r(()=>[a(b,{modelValue:l.categories,"onUpdate:modelValue":t[0]||(t[0]=e=>l.categories=e),placeholder:"如：家国情怀",clearable:"",style:{width:"140px"}},null,8,["modelValue"])]),_:1}),a(g,{label:"作者"},{default:r(()=>[a(b,{modelValue:l.authors,"onUpdate:modelValue":t[1]||(t[1]=e=>l.authors=e),placeholder:"如：杜甫",clearable:"",style:{width:"120px"}},null,8,["modelValue"])]),_:1}),a(g,{label:"朝代"},{default:r(()=>[a(M,{modelValue:l.dynasties,"onUpdate:modelValue":t[2]||(t[2]=e=>l.dynasties=e),placeholder:"朝代",clearable:"",style:{width:"120px"}},{default:r(()=>[(o(),n(C,null,U(N,e=>a(I,{key:e,label:e,value:e},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),a(g,{label:"体裁"},{default:r(()=>[a(b,{modelValue:l.genres,"onUpdate:modelValue":t[3]||(t[3]=e=>l.genres=e),placeholder:"如：诗",clearable:"",style:{width:"100px"}},null,8,["modelValue"])]),_:1}),a(g,null,{default:r(()=>[a(V,{type:"primary",onClick:F},{default:r(()=>[...t[6]||(t[6]=[P("筛选",-1)])]),_:1}),a(V,{onClick:k},{default:r(()=>[...t[7]||(t[7]=[P("随机一批",-1)])]),_:1})]),_:1})]),_:1})])]),s("div",{ref_key:"contentAreaRef",ref:w,class:"content-area"},[h.value>1?(o(),n("div",X,[a(x,{"current-page":c.value,"onUpdate:currentPage":t[4]||(t[4]=e=>c.value=e),"page-size":m,total:d.value.length,layout:"prev, pager, next"},null,8,["current-page","total"])])):p("",!0),_.value?(o(),n("div",Z,[a(L,{class:"is-loading",size:32},{default:r(()=>[a(E(Y))]),_:1})])):(o(),n("div",ee,[(o(!0),n(C,null,U(A.value,e=>(o(),$(O,{key:e.id,to:`/classic/item/${e.id}`,class:"item-card"},{default:r(()=>[s("p",te,f(e.original_text),1),e.translation?(o(),n("p",ae,f(e.translation),1)):p("",!0),s("div",le,[e.author?(o(),n("span",se,f(e.author),1)):p("",!0),e.dynasty?(o(),n("span",oe,f(e.dynasty),1)):p("",!0),e.genre?(o(),n("span",ne,f(e.genre),1)):p("",!0)])]),_:2},1032,["to"]))),128))])),h.value>1?(o(),n("div",re,[a(x,{"current-page":c.value,"onUpdate:currentPage":t[5]||(t[5]=e=>c.value=e),"page-size":m,total:d.value.length,layout:"prev, pager, next"},null,8,["current-page","total"])])):p("",!0)],512)])])])}}}),pe=G(ie,[["__scopeId","data-v-b18e36e6"]]);export{pe as default};
//# sourceMappingURL=Browse-Dvb7OqRh.js.map
