import{d as Q,l as o,O as v,C as I,M as K,n as R,c as a,a as c,b as r,e as u,w as y,y as T,r as i,D as l,F as U,x as j,g as A,f as E,Y as L,o as t,j as O,_ as Y}from"./index-DuIC7plb.js";import{s as $}from"./classic-l3kYh4Uo.js";const G={class:"classic-search-page"},H={class:"search-inner"},J={class:"search-bar"},W={key:0,class:"result-header"},X={key:1,class:"loading-wrap"},Z={key:2,class:"empty"},ee={key:3,class:"list-wrap"},te={class:"original content-font"},ae={key:0,class:"translation"},se={class:"meta"},oe={key:0},ne={key:1},le={key:2},re={key:4,class:"pagination-wrap"},h=20,ce=Q({__name:"Search",setup(ue){const w=I(),d=o(""),x=o(""),_=o([]),g=o(!1),f=o(!1),V=o(!0),q=o(!0),b=o(!0),p=o(1),S=v(()=>w.query.q??""),m=v(()=>_.value.length),z=v(()=>Math.ceil(m.value/h)||1),B=v(()=>{const s=(p.value-1)*h;return _.value.slice(s,s+h)});async function k(){const s=d.value?.trim();if(s){x.value=s,g.value=!0,f.value=!0;try{const n=await $(s,"keyword");_.value=n??[],p.value=1}finally{g.value=!1}}}function C(){const s=S.value;s&&(d.value=s,k())}return K(()=>w.query.q,C),R(C),(s,n)=>{const N=i("el-button"),P=i("el-input"),D=i("el-icon"),F=i("router-link"),M=i("el-pagination");return t(),a("div",G,[c("div",H,[c("div",J,[u(P,{modelValue:d.value,"onUpdate:modelValue":n[0]||(n[0]=e=>d.value=e),placeholder:"输入关键词搜索",size:"large",clearable:"",class:"input",onKeyup:T(k,["enter"])},{append:y(()=>[u(N,{type:"primary",onClick:k},{default:y(()=>[...n[2]||(n[2]=[A("搜索",-1)])]),_:1})]),_:1},8,["modelValue"])]),f.value?(t(),a("div",W,[c("span",null,"“"+l(x.value)+"” 共 "+l(m.value)+" 条",1)])):r("",!0),g.value?(t(),a("div",X,[u(D,{class:"is-loading",size:32},{default:y(()=>[u(E(L))]),_:1})])):f.value&&_.value.length===0?(t(),a("div",Z,"暂无结果")):(t(),a("div",ee,[(t(!0),a(U,null,j(B.value,e=>(t(),O(F,{key:e.id,to:`/classic/item/${e.id}`,class:"item-card"},{default:y(()=>[c("p",te,l(e.original_text),1),V.value&&e.translation?(t(),a("p",ae,l(e.translation),1)):r("",!0),c("div",se,[q.value&&e.author?(t(),a("span",oe,l(e.author),1)):r("",!0),b.value&&e.dynasty?(t(),a("span",ne,l(e.dynasty),1)):r("",!0),e.source?(t(),a("span",le,l(e.source),1)):r("",!0)])]),_:2},1032,["to"]))),128))])),z.value>1?(t(),a("div",re,[u(M,{"current-page":p.value,"onUpdate:currentPage":n[1]||(n[1]=e=>p.value=e),"page-size":h,total:m.value,layout:"prev, pager, next",onCurrentChange:()=>{}},null,8,["current-page","total"])])):r("",!0)])])}}}),_e=Y(ce,[["__scopeId","data-v-e8afa66f"]]);export{_e as default};
//# sourceMappingURL=Search-CI2svKm2.js.map
