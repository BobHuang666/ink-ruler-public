{"version":3,"file":"Membership-Dw2nFkoY.js","sources":["../../src/views/user/Membership.vue"],"sourcesContent":["<template>\n  <div class=\"membership-page\">\n    <div class=\"container\">\n      <h1 class=\"page-title header-font\">会员中心</h1>\n      <el-tabs v-model=\"activeTab\" class=\"membership-tabs\">\n        <el-tab-pane label=\"会员信息\" name=\"info\">\n          <el-card shadow=\"never\">\n            <div class=\"membership-intro\">\n              <p>\n                如需获得更多服务，可使用<span class=\"ink-highlight\">墨滴</span>兑换，或联系\n                <span\n                  class=\"contact-email\"\n                  role=\"button\"\n                  tabindex=\"0\"\n                  @click=\"copyContactEmail\"\n                  @keydown.enter=\"copyContactEmail\"\n                  >{{ contactEmail }}</span\n                >\n                获取兑换码。\n              </p>\n            </div>\n            <template\n              v-if=\"\n                (hasTimeMember && membership) ||\n                (membership && (membership.quota_remaining ?? 0) > 0)\n              \"\n            >\n              <h3 class=\"membership-info-title\">会员信息</h3>\n              <div v-if=\"hasTimeMember && membership\" class=\"membership-info\">\n                <el-descriptions :column=\"1\" border class=\"membership-descriptions\">\n                  <el-descriptions-item label=\"会员计划\">{{\n                    membership.plan\n                  }}</el-descriptions-item>\n                  <el-descriptions-item label=\"状态\">\n                    <el-tag :type=\"membership.status === 'active' ? 'success' : 'info'\">\n                      {{ membership.status === 'active' ? '有效' : '已过期' }}\n                    </el-tag>\n                  </el-descriptions-item>\n                  <el-descriptions-item label=\"开始时间\">\n                    {{ new Date(membership.started_at).toLocaleDateString() }}\n                  </el-descriptions-item>\n                  <el-descriptions-item label=\"到期时间\">\n                    {{ new Date(membership.expired_at).toLocaleDateString() }}\n                  </el-descriptions-item>\n                  <el-descriptions-item\n                    v-if=\"(membership.quota_remaining ?? 0) > 0\"\n                    label=\"次数卡剩余\"\n                  >\n                    {{ membership.quota_remaining }}\n                  </el-descriptions-item>\n                </el-descriptions>\n              </div>\n              <div\n                v-else-if=\"membership && (membership.quota_remaining ?? 0) > 0\"\n                class=\"membership-info\"\n              >\n                <el-descriptions :column=\"1\" border class=\"membership-descriptions\">\n                  <el-descriptions-item label=\"次数卡剩余\">\n                    {{ membership.quota_remaining }}\n                  </el-descriptions-item>\n                </el-descriptions>\n              </div>\n            </template>\n            <el-empty v-else description=\"您还不是会员\" class=\"membership-empty\" />\n            <div class=\"ink-exchange-section\">\n              <h3 class=\"ink-exchange-title\">墨滴兑换</h3>\n              <p class=\"ink-balance\">当前墨滴：{{ authStore.user?.ink_drops ?? 0 }}</p>\n              <div class=\"ink-exchange-cards\">\n                <div v-for=\"item in inkExchangeProducts\" :key=\"item.type\" class=\"ink-exchange-card\">\n                  <div class=\"ink-card-title\">{{ item.title }}</div>\n                  <p class=\"ink-card-desc\">{{ item.desc }}</p>\n                  <div class=\"ink-card-cost\">\n                    <span class=\"ink-cost-num\">{{ item.cost }}</span>\n                    <span class=\"ink-cost-unit\">墨滴</span>\n                  </div>\n                  <el-button\n                    type=\"primary\"\n                    size=\"default\"\n                    class=\"ink-card-btn\"\n                    :loading=\"exchangeLoading === item.type\"\n                    @click=\"handleExchangeByInk(item)\"\n                  >\n                    兑换\n                  </el-button>\n                </div>\n              </div>\n              <p v-if=\"(authStore.user?.ink_drops ?? 0) < 900\" class=\"ink-hint\">\n                墨滴可通过签到获得\n              </p>\n            </div>\n            <div class=\"membership-redeem\">\n              <h3 class=\"membership-redeem-title\">兑换码</h3>\n              <div class=\"redeem-box\">\n                <el-input\n                  v-model=\"redeemCode\"\n                  placeholder=\"请输入兑换码\"\n                  clearable\n                  maxlength=\"64\"\n                  class=\"redeem-input\"\n                />\n                <el-button\n                  type=\"primary\"\n                  :loading=\"redeemLoading\"\n                  :disabled=\"!redeemCode.trim()\"\n                  @click=\"handleRedeemCode\"\n                >\n                  兑换\n                </el-button>\n              </div>\n            </div>\n          </el-card>\n        </el-tab-pane>\n\n        <el-tab-pane label=\"墨滴明细\" name=\"inkLog\">\n          <el-card shadow=\"never\">\n            <div class=\"ink-log-section\">\n              <p class=\"ink-balance\">当前墨滴：{{ authStore.user?.ink_drops ?? 0 }}</p>\n              <el-table\n                v-loading=\"inkLogLoading\"\n                :data=\"inkLogList\"\n                class=\"profile-table\"\n                style=\"width: 100%\"\n              >\n                <el-table-column prop=\"kind_label\" label=\"类型\" min-width=\"100\" />\n                <el-table-column prop=\"amount\" label=\"变动\" min-width=\"80\">\n                  <template #default=\"{ row }\">\n                    <span :class=\"row.amount >= 0 ? 'ink-plus' : 'ink-minus'\">\n                      {{ row.amount >= 0 ? '+' : '' }}{{ row.amount }}\n                    </span>\n                  </template>\n                </el-table-column>\n                <el-table-column prop=\"created_at\" label=\"时间\" min-width=\"160\">\n                  <template #default=\"{ row }\">\n                    {{ new Date(row.created_at).toLocaleString() }}\n                  </template>\n                </el-table-column>\n              </el-table>\n              <el-pagination\n                v-if=\"inkLogTotal > inkLogPageSize\"\n                class=\"ink-log-pagination\"\n                layout=\"prev, pager, next\"\n                :current-page=\"inkLogPage\"\n                :page-size=\"inkLogPageSize\"\n                :total=\"inkLogTotal\"\n                @current-change=\"onInkLogPageChange\"\n              />\n            </div>\n          </el-card>\n        </el-tab-pane>\n      </el-tabs>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { useAuthStore } from '@/stores/auth'\nimport * as userApi from '@/api/user'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport type { Membership } from '@/types/user'\nimport type { InkDropsLogItem } from '@/api/user'\n\nconst route = useRoute()\nconst authStore = useAuthStore()\n\nconst activeTab = ref<'info' | 'inkLog'>('info')\nconst membership = ref<Membership | null>(null)\nconst redeemCode = ref('')\nconst redeemLoading = ref(false)\nconst exchangeLoading = ref<'' | 'quota_10' | 'month' | 'year'>('')\n\nconst contactEmail = 'inkruler@163.com'\nconst inkExchangeProducts: {\n  type: 'quota_10' | 'month' | 'year'\n  title: string\n  desc: string\n  cost: number\n}[] = [\n  { type: 'quota_10', title: '10 次次数卡', desc: '可批改 10 篇作文，不限期使用', cost: 900 },\n  { type: 'month', title: '1 个月会员', desc: '30 天内无限次批改', cost: 1500 },\n  { type: 'year', title: '1 年会员', desc: '一年内无限次批改，更划算', cost: 15000 },\n]\n\nasync function copyContactEmail() {\n  try {\n    await window.navigator.clipboard.writeText(contactEmail)\n    ElMessage.success('已复制到剪贴板')\n  } catch {\n    ElMessage.error('复制失败')\n  }\n}\n\nconst hasTimeMember = computed(\n  () =>\n    !!(\n      membership.value?.started_at &&\n      membership.value?.expired_at &&\n      !String(membership.value.expired_at).startsWith('0001')\n    )\n)\n\nconst inkLogList = ref<(InkDropsLogItem & { kind_label: string })[]>([])\nconst inkLogLoading = ref(false)\nconst inkLogPage = ref(1)\nconst inkLogPageSize = 20\nconst inkLogTotal = ref(0)\nconst kindLabels: Record<string, string> = {\n  register_gift: '注册赠送',\n  checkin: '签到',\n  correct: '批改消耗',\n  exchange_quota_10: '兑换10次次数卡',\n  exchange_month: '兑换月会员',\n  exchange_year: '兑换年会员',\n  admin_grant: '管理员增加',\n}\n\nconst redeemKindLabels: Record<string, string> = {\n  quota_10: '10 次次数卡',\n  month: '1 个月会员',\n  year: '1 年会员',\n}\n\nasync function fetchMembership() {\n  try {\n    membership.value = await userApi.getMembership()\n  } catch {\n    // ignore\n  }\n}\n\nasync function handleRedeemCode() {\n  const code = redeemCode.value.trim()\n  if (!code) return\n  let typeLabel: string\n  try {\n    const { kind } = await userApi.redeemPreview(code)\n    typeLabel = redeemKindLabels[kind] ?? kind\n  } catch {\n    ElMessage.error('兑换码无效或已使用')\n    return\n  }\n  const confirmed = await ElMessageBox.confirm(\n    `每个兑换码仅可使用一次，确定使用兑换码「${code}」兑换「${typeLabel}」吗？`,\n    '兑换提示',\n    {\n      confirmButtonText: '确认兑换',\n      cancelButtonText: '取消',\n      type: 'info',\n      customClass: 'app-dialog',\n    }\n  ).catch(() => false)\n  if (!confirmed) return\n  redeemLoading.value = true\n  try {\n    await userApi.redeemMembership(code)\n    await authStore.fetchUser()\n    membership.value = await userApi.getMembership()\n    redeemCode.value = ''\n    ElMessage.success('兑换成功')\n  } catch (error: unknown) {\n    ElMessage.error((error as Error).message || '兑换失败')\n  } finally {\n    redeemLoading.value = false\n  }\n}\n\nasync function handleExchangeByInk(item: {\n  type: 'quota_10' | 'month' | 'year'\n  title: string\n  cost: number\n}) {\n  const { type, title, cost } = item\n  const ink = authStore.user?.ink_drops ?? 0\n  if (ink < cost) {\n    const msgHtml = `墨滴不足，可联系 <span class=\"app-dialog-email\" data-email=\"${contactEmail}\">${contactEmail}</span> 获取更多服务`\n    const p = ElMessageBox.alert(msgHtml, '提示', {\n      confirmButtonText: '确定',\n      customClass: 'app-dialog',\n      dangerouslyUseHTMLString: true,\n    })\n    setTimeout(() => {\n      document.querySelectorAll('.app-dialog-email').forEach((el) => {\n        el.addEventListener('click', () => {\n          window.navigator.clipboard.writeText(contactEmail).then(\n            () => ElMessage.success('已复制到剪贴板'),\n            () => ElMessage.error('复制失败')\n          )\n        })\n      })\n    }, 50)\n    await p\n    return\n  }\n  const confirmed = await ElMessageBox.confirm(\n    `将消耗 ${cost} 墨滴兑换「${title}」。\\n当前墨滴：${ink}`,\n    '消耗确认',\n    {\n      confirmButtonText: '确认继续',\n      cancelButtonText: '取消',\n      type: 'info',\n      customClass: 'app-dialog',\n    }\n  ).catch(() => false)\n  if (!confirmed) return\n  exchangeLoading.value = type\n  try {\n    await userApi.exchangeByInk(type)\n    await authStore.fetchUser()\n    membership.value = await userApi.getMembership()\n    ElMessage.success('兑换成功')\n  } catch (error: unknown) {\n    ElMessage.error((error as Error).message || '兑换失败')\n  } finally {\n    exchangeLoading.value = ''\n  }\n}\n\nasync function fetchInkDropsLog() {\n  inkLogLoading.value = true\n  try {\n    const res = await userApi.getInkDropsLog({\n      page: inkLogPage.value,\n      size: inkLogPageSize,\n    })\n    inkLogTotal.value = res.total\n    inkLogList.value = (res.list || []).map((item) => ({\n      ...item,\n      kind_label: kindLabels[item.kind] || item.kind,\n    }))\n  } catch {\n    inkLogList.value = []\n  } finally {\n    inkLogLoading.value = false\n  }\n}\n\nfunction onInkLogPageChange(p: number) {\n  inkLogPage.value = p\n  fetchInkDropsLog()\n}\n\nonMounted(async () => {\n  const tab = route.query.tab as string\n  if (tab === 'inkLog' || tab === 'info') activeTab.value = tab\n  await fetchMembership()\n})\n\nwatch(activeTab, (tab) => {\n  if (tab === 'inkLog') fetchInkDropsLog()\n})\n</script>\n\n<style scoped>\n.membership-page {\n  min-height: calc(100vh - var(--header-height) - 80px);\n  padding: var(--spacing-lg) 0;\n  background: transparent;\n}\n\n.container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 var(--spacing-md);\n}\n\n.page-title {\n  margin: 0 0 var(--spacing-lg);\n  font-size: 1.5rem;\n  font-weight: 600;\n}\n\n.membership-tabs :deep(.el-tabs__header) {\n  margin-bottom: var(--spacing-md);\n}\n\n.membership-intro {\n  margin-bottom: var(--spacing-lg);\n  padding: var(--spacing-sm) 0;\n  font-size: var(--font-size-sm);\n  color: var(--color-text-secondary);\n}\n.membership-intro .ink-highlight {\n  font-weight: 700;\n  color: #e6a23c;\n}\n.membership-intro .contact-email {\n  color: #e6a23c;\n  text-decoration: underline;\n  cursor: pointer;\n  outline: none;\n}\n.membership-intro .contact-email:hover {\n  opacity: 0.9;\n}\n\n.membership-info-title {\n  font-size: 1.25rem;\n  font-weight: 600;\n  margin: 0 0 var(--spacing-md);\n  color: var(--color-text-primary, #303133);\n}\n.membership-info {\n  padding: var(--spacing-md);\n  margin-bottom: var(--spacing-lg);\n}\n.membership-empty {\n  margin-bottom: var(--spacing-lg);\n}\n.membership-descriptions {\n  border-radius: 8px;\n  overflow: hidden;\n}\n.membership-descriptions :deep(.el-descriptions__label) {\n  width: 100px;\n  font-weight: 500;\n  color: var(--color-text-secondary);\n}\n.membership-descriptions :deep(.el-descriptions__content) {\n  color: var(--color-text-primary, #303133);\n}\n\n.ink-exchange-section {\n  margin-top: var(--spacing-lg);\n  padding-top: var(--spacing-lg);\n  border-top: 1px solid var(--border-color-light, #ebeef5);\n  margin-bottom: var(--spacing-lg);\n}\n.ink-exchange-title {\n  font-size: 1.25rem;\n  font-weight: 600;\n  margin: 0 0 var(--spacing-md);\n  color: var(--color-text-primary, #303133);\n}\n.ink-balance {\n  margin-bottom: var(--spacing-md);\n  font-weight: 500;\n}\n.ink-exchange-cards {\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: var(--spacing-md);\n}\n@media (min-width: 768px) {\n  .ink-exchange-cards {\n    grid-template-columns: repeat(3, 1fr);\n    align-items: stretch;\n  }\n}\n.ink-exchange-card {\n  display: flex;\n  flex-direction: column;\n  padding: var(--spacing-md);\n  border: 1px solid var(--border-color-light, #ebeef5);\n  border-radius: 10px;\n  background: var(--el-fill-color-blank, #fff);\n}\n@media (min-width: 768px) {\n  .ink-exchange-card {\n    height: 100%;\n  }\n}\n.ink-card-title {\n  font-size: var(--font-size-base);\n  font-weight: 600;\n  margin-bottom: var(--spacing-xs);\n}\n.ink-card-desc {\n  font-size: var(--font-size-sm);\n  color: var(--color-text-secondary);\n  margin: 0 0 var(--spacing-sm);\n}\n.ink-card-cost {\n  margin-bottom: var(--spacing-sm);\n}\n.ink-cost-num {\n  font-weight: 700;\n  color: #e6a23c;\n  font-size: 1.1em;\n}\n.ink-cost-unit {\n  margin-left: 2px;\n  color: var(--color-text-secondary);\n  font-size: var(--font-size-sm);\n}\n.ink-card-btn {\n  width: 100%;\n  margin-top: auto;\n}\n.ink-hint {\n  font-size: var(--font-size-sm);\n  color: var(--color-text-secondary);\n  margin-top: var(--spacing-sm);\n}\n\n.membership-redeem {\n  margin-top: var(--spacing-lg);\n  padding-top: var(--spacing-lg);\n  border-top: 1px solid var(--border-color-light, #ebeef5);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.membership-redeem-title {\n  font-size: 1.25rem;\n  font-weight: 600;\n  margin: 0 0 var(--spacing-md);\n  color: var(--color-text-primary, #303133);\n  align-self: flex-start;\n}\n.redeem-box {\n  display: flex;\n  gap: var(--spacing-sm);\n  align-items: center;\n  width: 100%;\n  max-width: 400px;\n}\n.redeem-input {\n  flex: 1;\n  max-width: 280px;\n}\n\n.ink-log-section .ink-balance {\n  margin-bottom: var(--spacing-md);\n}\n.ink-plus {\n  color: var(--el-color-success);\n}\n.ink-minus {\n  color: var(--el-color-danger);\n}\n.ink-log-pagination {\n  margin-top: var(--spacing-md);\n}\n\n.profile-table {\n  min-width: 400px;\n}\n</style>\n"],"names":["contactEmail","inkLogPageSize","route","useRoute","authStore","useAuthStore","activeTab","ref","membership","redeemCode","redeemLoading","exchangeLoading","inkExchangeProducts","copyContactEmail","ElMessage","hasTimeMember","computed","inkLogList","inkLogLoading","inkLogPage","inkLogTotal","kindLabels","redeemKindLabels","fetchMembership","userApi.getMembership","handleRedeemCode","code","typeLabel","kind","userApi.redeemPreview","ElMessageBox","userApi.redeemMembership","error","handleExchangeByInk","item","type","title","cost","ink","msgHtml","p","el","userApi.exchangeByInk","fetchInkDropsLog","res","userApi.getInkDropsLog","onInkLogPageChange","onMounted","tab","watch","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_cache","_createVNode","_component_el_tabs","$event","_component_el_tab_pane","_component_el_card","_hoisted_3","_Fragment","_hoisted_4","_component_el_descriptions","_component_el_descriptions_item","_createTextVNode","_toDisplayString","_component_el_tag","_createBlock","_hoisted_5","_component_el_empty","_hoisted_6","_hoisted_7","_unref","_hoisted_8","_renderList","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_component_el_button","_hoisted_13","_hoisted_14","_hoisted_15","_component_el_input","_hoisted_16","_hoisted_17","_component_el_table","_component_el_table_column","_withCtx","row","_normalizeClass","_component_el_pagination"],"mappings":"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"}