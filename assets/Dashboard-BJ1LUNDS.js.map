{"version":3,"file":"Dashboard-BJ1LUNDS.js","sources":["../../src/api/admin.ts","../../src/views/admin/Dashboard.vue"],"sourcesContent":["import request from '@/utils/request'\nimport type { AdminMetrics, AdminLog, ContentFlag } from '@/types/admin'\nimport type { UserDetail } from '@/types/user'\nimport type { PageResponse } from '@/types/api'\n\n// 管理员指标\nexport async function getMetrics(): Promise<AdminMetrics> {\n  const res = await request.get<AdminMetrics>('/admin/metrics')\n  return res.data\n}\n\n// 用户列表（管理端）\nexport async function getUserList(params: {\n  q?: string\n  role?: string\n  status?: string\n  page?: number\n  size?: number\n}): Promise<PageResponse<UserDetail>> {\n  const page = params.page ?? 1\n  const size = params.size ?? 10\n  const res = await request.get<{ list: Record<string, unknown>[]; total: number }>(\n    '/admin/users',\n    {\n      params: { q: params.q, role: params.role, status: params.status, page, size },\n    }\n  )\n  const list = (res.data.list ?? []).map((d) => ({\n    id: d.id as number,\n    email: d.email as string,\n    phone: d.phone as string | undefined,\n    nickname: (d.nickname as string) ?? '',\n    avatar: d.avatar as string | undefined,\n    role: d.role as UserDetail['role'],\n    status: d.status as UserDetail['status'],\n    ink_drops: (d.ink_drops as number) ?? 0,\n    membership_label: (d.membership_label as string) ?? '非会员',\n    created_at: (d.created_at as string) ?? '',\n    updated_at: (d.updated_at as string) ?? '',\n  }))\n  return { items: list, total: res.data.total ?? 0, page, size }\n}\n\n// 更新用户（管理端）\nexport async function updateUser(\n  id: number,\n  data: { role?: string; status?: string }\n): Promise<void> {\n  await request.patch(`/admin/users/${id}`, data)\n}\n\n// 管理员为用户添加墨滴\nexport async function addUserInkDrops(userId: number, amount: number): Promise<void> {\n  await request.post(`/admin/users/${userId}/ink-drops`, { amount })\n}\n\n// 操作日志\nexport async function getAdminLogs(params?: {\n  page?: number\n  size?: number\n}): Promise<PageResponse<AdminLog>> {\n  const page = params?.page ?? 1\n  const size = params?.size ?? 20\n  const res = await request.get<{ list: AdminLog[]; total: number }>('/admin/logs', {\n    params: { page, size },\n  })\n  return {\n    items: res.data.list ?? [],\n    total: res.data.total ?? 0,\n    page,\n    size,\n  }\n}\n\n// 内容标记列表\nexport async function getContentFlags(params?: {\n  page?: number\n  size?: number\n}): Promise<PageResponse<ContentFlag>> {\n  const page = params?.page ?? 1\n  const size = params?.size ?? 10\n  const res = await request.get<{ list: ContentFlag[]; total: number }>('/admin/flags', {\n    params: { page, size },\n  })\n  return {\n    items: res.data.list ?? [],\n    total: res.data.total ?? 0,\n    page,\n    size,\n  }\n}\n\n// 更新内容标记状态\nexport async function updateContentFlag(id: number, status: 'open' | 'resolved'): Promise<void> {\n  await request.patch(`/admin/flags/${id}`, { status })\n}\n\n// 兑换码类型\nexport type RedemptionCodeKind = 'quota_10' | 'month' | 'year'\n\n// 生成兑换码\nexport async function generateRedemptionCodes(\n  kind: RedemptionCodeKind,\n  count: number\n): Promise<{ codes: string[] }> {\n  const res = await request.post<{ codes: string[] }>('/admin/redemption-codes', { kind, count })\n  return res.data\n}\n","<template>\n  <div class=\"admin-page\">\n    <div class=\"admin-container\">\n      <el-row :gutter=\"20\">\n        <el-col :xs=\"24\" :sm=\"4\">\n          <el-menu :default-active=\"activeMenu\" class=\"admin-menu\" @select=\"handleMenuSelect\">\n            <el-menu-item index=\"dashboard\">\n              <el-icon><DataBoard /></el-icon>\n              <span>数据看板</span>\n            </el-menu-item>\n            <el-menu-item index=\"users\">\n              <el-icon><User /></el-icon>\n              <span>用户管理</span>\n            </el-menu-item>\n            <!-- <el-menu-item index=\"content\">\n              <el-icon><Document /></el-icon>\n              <span>内容管理</span>\n            </el-menu-item> -->\n            <el-menu-item index=\"redemption-codes\">\n              <el-icon><Ticket /></el-icon>\n              <span>兑换码</span>\n            </el-menu-item>\n            <el-menu-item index=\"logs\">\n              <el-icon><List /></el-icon>\n              <span>操作日志</span>\n            </el-menu-item>\n          </el-menu>\n        </el-col>\n        <el-col :xs=\"24\" :sm=\"20\">\n          <!-- 数据看板 -->\n          <div v-show=\"activeMenu === 'dashboard'\" class=\"dashboard-content\">\n            <h2 class=\"header-font\">数据看板</h2>\n            <el-row :gutter=\"20\" class=\"metrics-row\">\n              <el-col :xs=\"12\" :sm=\"6\">\n                <el-card shadow=\"hover\">\n                  <div class=\"metric-item\">\n                    <div class=\"metric-value\">{{ metrics.user_count }}</div>\n                    <div class=\"metric-label\">总用户数</div>\n                  </div>\n                </el-card>\n              </el-col>\n              <el-col :xs=\"12\" :sm=\"6\">\n                <el-card shadow=\"hover\">\n                  <div class=\"metric-item\">\n                    <div class=\"metric-value\">{{ metrics.active_user_count }}</div>\n                    <div class=\"metric-label\">活跃用户</div>\n                  </div>\n                </el-card>\n              </el-col>\n              <el-col :xs=\"12\" :sm=\"6\">\n                <el-card shadow=\"hover\">\n                  <div class=\"metric-item\">\n                    <div class=\"metric-value\">{{ metrics.essay_count }}</div>\n                    <div class=\"metric-label\">作文提交量</div>\n                  </div>\n                </el-card>\n              </el-col>\n              <el-col :xs=\"12\" :sm=\"6\">\n                <el-card shadow=\"hover\">\n                  <div class=\"metric-item\">\n                    <div class=\"metric-value\">{{ metrics.token_usage.total }}</div>\n                    <div class=\"metric-label\">Token使用总量</div>\n                  </div>\n                </el-card>\n              </el-col>\n            </el-row>\n            <el-card shadow=\"never\" class=\"token-card\">\n              <h3 class=\"header-font\">Token使用情况</h3>\n              <el-descriptions :column=\"tokenDescColumn\" border>\n                <el-descriptions-item label=\"今日使用\">\n                  {{ metrics.token_usage.today }}\n                </el-descriptions-item>\n                <el-descriptions-item label=\"本月使用\">\n                  {{ metrics.token_usage.this_month }}\n                </el-descriptions-item>\n                <el-descriptions-item label=\"总使用量\">\n                  {{ metrics.token_usage.total }}\n                </el-descriptions-item>\n              </el-descriptions>\n            </el-card>\n            <p class=\"dashboard-note\">活跃用户：统计最近 7 天内有过登录的用户。</p>\n          </div>\n\n          <!-- 用户管理 -->\n          <div v-show=\"activeMenu === 'users'\" class=\"users-content\">\n            <h2 class=\"header-font\">用户管理</h2>\n            <el-card shadow=\"never\">\n              <div class=\"search-bar\">\n                <el-input\n                  v-model=\"userSearchQuery\"\n                  placeholder=\"搜索用户...\"\n                  class=\"search-input\"\n                  clearable\n                  @keyup.enter=\"fetchUsers\"\n                >\n                  <template #prefix>\n                    <el-icon><Search /></el-icon>\n                  </template>\n                </el-input>\n                <el-select\n                  v-model=\"userRoleFilter\"\n                  placeholder=\"角色\"\n                  class=\"search-select\"\n                  clearable\n                >\n                  <el-option label=\"学生\" value=\"student\" />\n                  <el-option label=\"管理员\" value=\"admin\" />\n                </el-select>\n                <el-select\n                  v-model=\"userStatusFilter\"\n                  placeholder=\"状态\"\n                  class=\"search-select\"\n                  clearable\n                >\n                  <el-option label=\"正常\" value=\"active\" />\n                  <el-option label=\"禁用\" value=\"disabled\" />\n                </el-select>\n                <el-button type=\"primary\" @click=\"fetchUsers\">搜索</el-button>\n              </div>\n              <div class=\"table-scroll-wrap\">\n                <el-table\n                  v-loading=\"usersLoading\"\n                  :data=\"users\"\n                  style=\"width: 100%; margin-top: 20px\"\n                >\n                  <el-table-column prop=\"id\" label=\"ID\" width=\"80\" />\n                  <el-table-column prop=\"nickname\" label=\"昵称\" />\n                  <el-table-column prop=\"email\" label=\"邮箱\" />\n                  <el-table-column prop=\"role\" label=\"角色\" width=\"100\">\n                    <template #default=\"{ row }\">\n                      <el-tag :type=\"row.role === 'admin' ? 'danger' : 'primary'\">\n                        {{ row.role === 'admin' ? '管理员' : '学生' }}\n                      </el-tag>\n                    </template>\n                  </el-table-column>\n                  <el-table-column prop=\"status\" label=\"状态\" width=\"100\">\n                    <template #default=\"{ row }\">\n                      <el-tag :type=\"row.status === 'active' ? 'success' : 'info'\">\n                        {{ row.status === 'active' ? '正常' : '禁用' }}\n                      </el-tag>\n                    </template>\n                  </el-table-column>\n                  <el-table-column prop=\"membership_label\" label=\"会员\" width=\"110\">\n                    <template #default=\"{ row }\">\n                      <el-tag\n                        :type=\"\n                          row.membership_label === '会员'\n                            ? 'warning'\n                            : row.membership_label !== '非会员'\n                              ? 'primary'\n                              : 'info'\n                        \"\n                      >\n                        {{ row.membership_label ?? '非会员' }}\n                      </el-tag>\n                    </template>\n                  </el-table-column>\n                  <el-table-column prop=\"ink_drops\" label=\"墨滴\" width=\"90\" align=\"center\">\n                    <template #default=\"{ row }\">\n                      {{ row.ink_drops ?? 0 }}\n                    </template>\n                  </el-table-column>\n                  <el-table-column label=\"操作\" width=\"260\">\n                    <template #default=\"{ row }\">\n                      <el-button type=\"primary\" text @click=\"handleEditUser(row)\">编辑</el-button>\n                      <el-button type=\"primary\" text @click=\"handleOpenAddInkDrops(row)\"\n                        >添加墨滴</el-button\n                      >\n                      <el-button\n                        :type=\"row.status === 'active' ? 'warning' : 'success'\"\n                        text\n                        @click=\"handleToggleUserStatus(row)\"\n                      >\n                        {{ row.status === 'active' ? '禁用' : '启用' }}\n                      </el-button>\n                    </template>\n                  </el-table-column>\n                </el-table>\n              </div>\n              <el-pagination\n                v-model:current-page=\"userPage\"\n                v-model:page-size=\"userPageSize\"\n                :total=\"userTotal\"\n                layout=\"total, prev, pager, next\"\n                style=\"margin-top: 20px\"\n                @current-change=\"fetchUsers\"\n              />\n            </el-card>\n          </div>\n\n          <!-- 内容管理 -->\n          <div v-show=\"activeMenu === 'content'\" class=\"content-content\">\n            <h2 class=\"header-font\">内容管理</h2>\n            <el-card shadow=\"never\">\n              <div class=\"table-scroll-wrap\">\n                <el-table\n                  v-loading=\"flagsLoading\"\n                  :data=\"flags\"\n                  class=\"admin-table\"\n                  style=\"width: 100%\"\n                >\n                  <el-table-column prop=\"id\" label=\"ID\" width=\"80\" />\n                  <el-table-column prop=\"target_type\" label=\"类型\" width=\"120\" />\n                  <el-table-column prop=\"target_id\" label=\"目标ID\" width=\"100\" />\n                  <el-table-column prop=\"reason\" label=\"原因\" />\n                  <el-table-column prop=\"status\" label=\"状态\" width=\"100\">\n                    <template #default=\"{ row }\">\n                      <el-tag :type=\"row.status === 'resolved' ? 'success' : 'warning'\">\n                        {{ row.status === 'resolved' ? '已处理' : '待处理' }}\n                      </el-tag>\n                    </template>\n                  </el-table-column>\n                  <el-table-column label=\"操作\" width=\"150\">\n                    <template #default=\"{ row }\">\n                      <el-button\n                        v-if=\"row.status === 'open'\"\n                        type=\"success\"\n                        text\n                        @click=\"handleResolveFlag(row)\"\n                      >\n                        标记已处理\n                      </el-button>\n                    </template>\n                  </el-table-column>\n                </el-table>\n              </div>\n            </el-card>\n          </div>\n\n          <!-- 兑换码 -->\n          <div v-show=\"activeMenu === 'redemption-codes'\" class=\"redemption-codes-content\">\n            <h2 class=\"header-font\">生成兑换码</h2>\n            <el-card shadow=\"never\">\n              <el-form :model=\"redeemForm\" label-width=\"80px\" class=\"redeem-form\">\n                <el-form-item label=\"类型\">\n                  <el-select v-model=\"redeemForm.kind\" placeholder=\"选择类型\">\n                    <el-option label=\"10 次次数卡\" value=\"quota_10\" />\n                    <el-option label=\"月卡\" value=\"month\" />\n                    <el-option label=\"年卡\" value=\"year\" />\n                  </el-select>\n                </el-form-item>\n                <el-form-item label=\"数量\">\n                  <el-input-number v-model=\"redeemForm.count\" :min=\"1\" :max=\"100\" />\n                </el-form-item>\n                <el-form-item>\n                  <el-button\n                    type=\"primary\"\n                    :loading=\"redeemGenerating\"\n                    @click=\"handleGenerateCodes\"\n                  >\n                    生成\n                  </el-button>\n                </el-form-item>\n              </el-form>\n              <div v-if=\"generatedCodes.length\" class=\"redeem-result\">\n                <div class=\"redeem-result-actions\">\n                  <el-button size=\"small\" @click=\"copyCodes\">复制全部</el-button>\n                  <el-button size=\"small\" @click=\"downloadCodesTxt\">下载 txt</el-button>\n                </div>\n                <el-input\n                  v-model=\"generatedCodesText\"\n                  type=\"textarea\"\n                  :rows=\"10\"\n                  readonly\n                  class=\"redeem-codes-textarea\"\n                />\n              </div>\n            </el-card>\n          </div>\n\n          <!-- 操作日志 -->\n          <div v-show=\"activeMenu === 'logs'\" class=\"logs-content\">\n            <h2 class=\"header-font\">操作日志</h2>\n            <el-card shadow=\"never\">\n              <div class=\"table-scroll-wrap\">\n                <el-table\n                  v-loading=\"logsLoading\"\n                  :data=\"logs\"\n                  class=\"admin-table\"\n                  style=\"width: 100%\"\n                >\n                  <el-table-column prop=\"id\" label=\"ID\" width=\"80\" />\n                  <el-table-column prop=\"action\" label=\"操作\" />\n                  <el-table-column prop=\"target_type\" label=\"目标类型\" width=\"120\" />\n                  <el-table-column prop=\"target_id\" label=\"目标ID\" width=\"100\" />\n                  <el-table-column prop=\"ip\" label=\"IP\" width=\"150\" />\n                  <el-table-column prop=\"created_at\" label=\"时间\" width=\"180\">\n                    <template #default=\"{ row }\">\n                      {{ new Date(row.created_at).toLocaleString() }}\n                    </template>\n                  </el-table-column>\n                </el-table>\n              </div>\n            </el-card>\n          </div>\n        </el-col>\n      </el-row>\n    </div>\n\n    <!-- 编辑用户对话框 -->\n    <el-dialog v-model=\"showUserDialog\" title=\"编辑用户\" width=\"500px\" class=\"edit-user-dialog\">\n      <el-form :model=\"editUserForm\" label-width=\"100px\">\n        <el-form-item label=\"角色\">\n          <el-select v-model=\"editUserForm.role\">\n            <el-option label=\"学生\" value=\"student\" />\n            <el-option label=\"管理员\" value=\"admin\" />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"状态\">\n          <el-select v-model=\"editUserForm.status\">\n            <el-option label=\"正常\" value=\"active\" />\n            <el-option label=\"禁用\" value=\"disabled\" />\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <el-button @click=\"showUserDialog = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"handleSaveUser\">保存</el-button>\n      </template>\n    </el-dialog>\n\n    <el-dialog v-model=\"showInkDropsDialog\" title=\"添加墨滴\" width=\"400px\">\n      <p v-if=\"inkDropsTargetUser\" class=\"ink-drops-target\">\n        用户：{{ inkDropsTargetUser.nickname || inkDropsTargetUser.email }}（ID:\n        {{ inkDropsTargetUser.id }}）\n      </p>\n      <el-form :model=\"inkDropsForm\" label-width=\"80px\">\n        <el-form-item label=\"数量\">\n          <el-input-number v-model=\"inkDropsForm.amount\" :min=\"1\" :max=\"99999\" />\n        </el-form-item>\n        <p class=\"ink-drops-hint\">请输入 1～99999</p>\n      </el-form>\n      <template #footer>\n        <el-button @click=\"showInkDropsDialog = false\">取消</el-button>\n        <el-button type=\"primary\" :loading=\"inkDropsSubmitting\" @click=\"handleConfirmAddInkDrops\"\n          >确定</el-button\n        >\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\n/* global navigator */\nimport { ref, onMounted, onUnmounted } from 'vue'\nimport * as adminApi from '@/api/admin'\nimport { ElMessage } from 'element-plus'\nimport { DataBoard, User, List, Search, Ticket } from '@element-plus/icons-vue'\nimport type { AdminMetrics, AdminLog, ContentFlag } from '@/types/admin'\nimport type { UserDetail } from '@/types/user'\nimport type { RedemptionCodeKind } from '@/api/admin'\n\nconst activeMenu = ref('dashboard')\nconst tokenDescColumn = ref(3)\n\nconst metrics = ref<AdminMetrics>({\n  user_count: 0,\n  active_user_count: 0,\n  essay_count: 0,\n  token_usage: { total: 0, today: 0, this_month: 0 },\n})\n\nconst users = ref<UserDetail[]>([])\nconst usersLoading = ref(false)\nconst userSearchQuery = ref('')\nconst userRoleFilter = ref('')\nconst userStatusFilter = ref('')\nconst userPage = ref(1)\nconst userPageSize = ref(10)\nconst userTotal = ref(0)\n\nconst flags = ref<ContentFlag[]>([])\nconst flagsLoading = ref(false)\n\nconst logs = ref<AdminLog[]>([])\nconst logsLoading = ref(false)\n\nconst showUserDialog = ref(false)\nconst editUserForm = ref({ role: '', status: '' })\nconst currentEditUserId = ref<number | null>(null)\n\nconst showInkDropsDialog = ref(false)\nconst inkDropsTargetUser = ref<UserDetail | null>(null)\nconst inkDropsForm = ref({ amount: 1000 })\nconst inkDropsSubmitting = ref(false)\n\nconst redeemForm = ref<{ kind: RedemptionCodeKind; count: number }>({\n  kind: 'quota_10',\n  count: 5,\n})\nconst redeemGenerating = ref(false)\nconst generatedCodes = ref<string[]>([])\nconst generatedCodesText = ref('')\n\nfunction updateTokenDescColumn() {\n  tokenDescColumn.value = window.innerWidth >= 768 ? 3 : 1\n}\n\nonMounted(async () => {\n  updateTokenDescColumn()\n  window.addEventListener('resize', updateTokenDescColumn)\n  await fetchMetrics()\n  await fetchUsers()\n  await fetchFlags()\n  await fetchLogs()\n})\n\nonUnmounted(() => {\n  window.removeEventListener('resize', updateTokenDescColumn)\n})\n\nasync function fetchMetrics() {\n  try {\n    metrics.value = await adminApi.getMetrics()\n  } catch (error: unknown) {\n    ElMessage.error((error as Error).message || '获取数据失败')\n  }\n}\n\nasync function fetchUsers() {\n  usersLoading.value = true\n  try {\n    const response = await adminApi.getUserList({\n      q: userSearchQuery.value,\n      role: userRoleFilter.value,\n      status: userStatusFilter.value,\n      page: userPage.value,\n      size: userPageSize.value,\n    })\n    users.value = response.items\n    userTotal.value = response.total\n  } catch (error: unknown) {\n    ElMessage.error((error as Error).message || '获取用户列表失败')\n  } finally {\n    usersLoading.value = false\n  }\n}\n\nasync function fetchFlags() {\n  flagsLoading.value = true\n  try {\n    const response = await adminApi.getContentFlags({})\n    flags.value = response.items\n  } catch (error: unknown) {\n    ElMessage.error((error as Error).message || '获取内容标记失败')\n  } finally {\n    flagsLoading.value = false\n  }\n}\n\nasync function fetchLogs() {\n  logsLoading.value = true\n  try {\n    const response = await adminApi.getAdminLogs({})\n    logs.value = response.items\n  } catch (error: unknown) {\n    ElMessage.error((error as Error).message || '获取日志失败')\n  } finally {\n    logsLoading.value = false\n  }\n}\n\nfunction handleMenuSelect(key: string) {\n  if (key === activeMenu.value) return\n  activeMenu.value = key\n}\n\nfunction handleEditUser(user: UserDetail) {\n  currentEditUserId.value = user.id\n  editUserForm.value = {\n    role: user.role,\n    status: user.status,\n  }\n  showUserDialog.value = true\n}\n\nasync function handleSaveUser() {\n  if (!currentEditUserId.value) return\n  try {\n    await adminApi.updateUser(currentEditUserId.value, editUserForm.value)\n    ElMessage.success('更新成功')\n    showUserDialog.value = false\n    await fetchUsers()\n  } catch (error: unknown) {\n    ElMessage.error((error as Error).message || '更新失败')\n  }\n}\n\nasync function handleToggleUserStatus(user: UserDetail) {\n  try {\n    await adminApi.updateUser(user.id, {\n      status: user.status === 'active' ? 'disabled' : 'active',\n    })\n    ElMessage.success('操作成功')\n    await fetchUsers()\n  } catch (error: unknown) {\n    ElMessage.error((error as Error).message || '操作失败')\n  }\n}\n\nfunction handleOpenAddInkDrops(user: UserDetail) {\n  inkDropsTargetUser.value = user\n  inkDropsForm.value = { amount: 1000 }\n  showInkDropsDialog.value = true\n}\n\nasync function handleConfirmAddInkDrops() {\n  if (!inkDropsTargetUser.value || inkDropsForm.value.amount < 1) return\n  inkDropsSubmitting.value = true\n  try {\n    await adminApi.addUserInkDrops(inkDropsTargetUser.value.id, inkDropsForm.value.amount)\n    ElMessage.success('已添加墨滴')\n    showInkDropsDialog.value = false\n    inkDropsTargetUser.value = null\n    await fetchUsers()\n  } catch (error: unknown) {\n    ElMessage.error((error as Error).message || '添加失败')\n  } finally {\n    inkDropsSubmitting.value = false\n  }\n}\n\nasync function handleResolveFlag(flag: ContentFlag) {\n  try {\n    await adminApi.updateContentFlag(flag.id, 'resolved')\n    ElMessage.success('标记已处理')\n    await fetchFlags()\n  } catch (error: unknown) {\n    ElMessage.error((error as Error).message || '操作失败')\n  }\n}\n\nasync function handleGenerateCodes() {\n  redeemGenerating.value = true\n  try {\n    const res = await adminApi.generateRedemptionCodes(\n      redeemForm.value.kind,\n      redeemForm.value.count\n    )\n    generatedCodes.value = res.codes\n    generatedCodesText.value = res.codes.join('\\n')\n    ElMessage.success(`已生成 ${res.codes.length} 个兑换码`)\n  } catch (error: unknown) {\n    ElMessage.error((error as Error).message || '生成失败')\n  } finally {\n    redeemGenerating.value = false\n  }\n}\n\nfunction copyCodes() {\n  if (!generatedCodesText.value) return\n  navigator.clipboard.writeText(generatedCodesText.value).then(\n    () => ElMessage.success('已复制到剪贴板'),\n    () => ElMessage.error('复制失败')\n  )\n}\n\nfunction downloadCodesTxt() {\n  if (!generatedCodesText.value) return\n  const blob = new Blob([generatedCodesText.value], { type: 'text/plain;charset=utf-8' })\n  const url = URL.createObjectURL(blob)\n  const a = document.createElement('a')\n  a.href = url\n  a.download = `兑换码_${redeemForm.value.kind}_${Date.now()}.txt`\n  a.click()\n  URL.revokeObjectURL(url)\n  ElMessage.success('已下载')\n}\n</script>\n\n<style scoped>\n.admin-page {\n  min-height: calc(100vh - var(--header-height) - 80px);\n  padding: var(--spacing-lg) 0;\n  background: transparent;\n}\n\n.admin-container {\n  max-width: 1400px;\n  margin: 0 auto;\n  padding: 0 var(--spacing-md);\n}\n\n.admin-menu {\n  height: calc(100vh - 200px);\n  border-radius: var(--border-radius-base);\n}\n\n.dashboard-content h2,\n.users-content h2,\n.content-content h2,\n.logs-content h2,\n.redemption-codes-content h2 {\n  margin-bottom: var(--spacing-lg);\n  font-size: var(--font-size-xl);\n  font-weight: 600;\n}\n\n.redeem-form {\n  max-width: 400px;\n}\n.redeem-result {\n  margin-top: var(--spacing-lg);\n  padding-top: var(--spacing-lg);\n  border-top: 1px solid var(--border-color-light, #ebeef5);\n}\n.redeem-result-actions {\n  margin-bottom: var(--spacing-sm);\n}\n.redeem-codes-textarea {\n  font-family: monospace;\n}\n\n.metrics-row {\n  margin-bottom: var(--spacing-lg);\n}\n.metrics-row :deep(.el-col) {\n  display: flex;\n}\n.metrics-row :deep(.el-col .el-card) {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-height: 120px;\n}\n.metrics-row :deep(.el-col .el-card__body) {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n@media (max-width: 768px) {\n  .metrics-row :deep(.el-col) {\n    margin-bottom: var(--spacing-md);\n  }\n  .metrics-row :deep(.el-col:nth-last-child(-n + 2)) {\n    margin-bottom: 0;\n  }\n}\n\n.metric-item {\n  text-align: center;\n  padding: var(--spacing-md);\n  width: 100%;\n}\n\n.metric-value {\n  font-size: 32px;\n  font-weight: 600;\n  color: var(--color-primary);\n  margin-bottom: var(--spacing-xs);\n}\n\n.metric-label {\n  font-size: var(--font-size-sm);\n  color: var(--color-text-secondary);\n}\n\n.dashboard-note {\n  margin-top: var(--spacing-lg);\n  font-size: var(--font-size-sm);\n  color: var(--color-text-secondary);\n}\n\n.token-card {\n  margin-top: var(--spacing-lg);\n}\n\n.search-bar {\n  display: flex;\n  flex-wrap: wrap;\n  gap: var(--spacing-sm);\n  margin-bottom: var(--spacing-md);\n}\n.search-bar .search-input {\n  width: 100%;\n  max-width: 300px;\n}\n.search-bar .search-select {\n  width: 120px;\n}\n@media (max-width: 768px) {\n  .search-bar .search-input {\n    max-width: none;\n  }\n  .search-bar .search-select {\n    width: 100%;\n    max-width: 160px;\n  }\n}\n\n.admin-menu {\n  margin-bottom: 0;\n}\n@media (max-width: 768px) {\n  .admin-menu {\n    height: auto;\n    margin-bottom: var(--spacing-md);\n  }\n}\n\n.ink-drops-target {\n  margin-bottom: var(--spacing-md);\n  color: var(--color-text-secondary);\n  font-size: var(--font-size-sm);\n}\n.ink-drops-hint {\n  margin: 0 0 var(--spacing-md);\n  font-size: 12px;\n  color: var(--color-text-secondary);\n}\n\n.table-scroll-wrap {\n  overflow-x: auto;\n}\n.admin-table {\n  min-width: 600px;\n}\n</style>\n\n<style>\n@media (max-width: 480px) {\n  .edit-user-dialog.el-dialog {\n    --el-dialog-width: calc(100vw - 32px) !important;\n    width: calc(100vw - 32px) !important;\n    max-width: calc(100vw - 32px);\n  }\n}\n</style>\n"],"names":["getMetrics","request","getUserList","params","page","size","res","d","updateUser","id","data","addUserInkDrops","userId","amount","getAdminLogs","getContentFlags","updateContentFlag","status","generateRedemptionCodes","kind","count","activeMenu","ref","tokenDescColumn","metrics","users","usersLoading","userSearchQuery","userRoleFilter","userStatusFilter","userPage","userPageSize","userTotal","flags","flagsLoading","logs","logsLoading","showUserDialog","editUserForm","currentEditUserId","showInkDropsDialog","inkDropsTargetUser","inkDropsForm","inkDropsSubmitting","redeemForm","redeemGenerating","generatedCodes","generatedCodesText","updateTokenDescColumn","onMounted","fetchMetrics","fetchUsers","fetchFlags","fetchLogs","onUnmounted","adminApi.getMetrics","error","ElMessage","response","adminApi.getUserList","adminApi.getContentFlags","adminApi.getAdminLogs","handleMenuSelect","key","handleEditUser","user","handleSaveUser","adminApi.updateUser","handleToggleUserStatus","handleOpenAddInkDrops","handleConfirmAddInkDrops","adminApi.addUserInkDrops","handleResolveFlag","flag","adminApi.updateContentFlag","handleGenerateCodes","adminApi.generateRedemptionCodes","copyCodes","downloadCodesTxt","blob","url","a","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_el_row","_component_el_col","_component_el_menu","_component_el_menu_item","_component_el_icon","_unref","DataBoard","_cache","User","Ticket","List","_withDirectives","_hoisted_3","_component_el_card","_hoisted_4","_hoisted_5","_toDisplayString","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_component_el_descriptions","_component_el_descriptions_item","_hoisted_12","_hoisted_13","_component_el_input","$event","Search","_component_el_select","_component_el_option","_component_el_button","_hoisted_14","_createBlock","_component_el_table","_component_el_table_column","_withCtx","row","_component_el_tag","_createTextVNode","_component_el_pagination","_hoisted_15","_hoisted_16","_hoisted_17","_component_el_form","_component_el_form_item","_component_el_input_number","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_component_el_dialog","_hoisted_22"],"mappings":"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"}