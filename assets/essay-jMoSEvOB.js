import{U as $,l as i}from"./index-BN8HEDSF.js";import{s as b,g as f,a as y,b as H,d as _,f as F,c as S,h as x,i as I}from"./essay-CN05qPJr.js";const j=$("essay",()=>{const r=i(null),n=i(null),o=i([]),l=i([]),e=i(!1);async function v(a){e.value=!0;try{const t=await b(a),s=await f(t.essay_id);return r.value=s,s}finally{e.value=!1}}async function d(a){e.value=!0;try{const t=await f(a);if(r.value=t,t.status==="done"){const s=await y(a);n.value=s}else t.correction&&(n.value=t.correction);return t}finally{e.value=!1}}async function E(a){e.value=!0;try{const t=await y(a);return n.value=t,t}finally{e.value=!1}}async function c(a){e.value=!0;try{const t=await H(a||{});return o.value=t.items,t}finally{e.value=!1}}async function w(a){await _(a),await c()}async function m(a){await F(a)}function D(a){r.value&&(r.value={...r.value,is_favorited:a})}function g(a,t){o.value=o.value.map(s=>s.id===a?{...s,is_favorited:t}:s)}async function u(){e.value=!0;try{const a=await S();return l.value=a,a}finally{e.value=!1}}async function h(a){const t=await x(a);return await u(),t}async function p(a){await I(a),await u()}function C(){r.value=null,n.value=null}return{currentEssay:r,currentCorrection:n,history:o,drafts:l,loading:e,submitEssay:v,fetchEssay:d,fetchCorrection:E,fetchHistory:c,deleteEssay:w,favoriteEssay:m,setCurrentEssayFavorited:D,setHistoryItemFavorited:g,fetchDrafts:u,createDraft:h,deleteDraft:p,clearCurrent:C}});export{j as u};
//# sourceMappingURL=essay-jMoSEvOB.js.map
