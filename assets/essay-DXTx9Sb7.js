import{a0 as R,k as r}from"./index-Bn_Xs3lU.js";import{s as _,g as y,a as v,b as k,d as F,f as P,c as S,h as x,i as I}from"./essay-CIdN-wlt.js";const q=R("essay",()=>{const n=r(null),u=r(null),i=r([]),o=r([]),e=r(!1),l=r(null);async function d(t){e.value=!0;try{const a=await _(t),s=await y(a.essay_id);return n.value=s,s}finally{e.value=!1}}async function E(t){e.value=!0;try{const a=await y(t);if(n.value=a,a.status==="done"){const s=await v(t);u.value=s}else a.correction&&(u.value=a.correction);return a}finally{e.value=!1}}async function w(t){e.value=!0;try{const a=await v(t);return u.value=a,a}finally{e.value=!1}}async function f(t){e.value=!0;try{const a=await k(t||{});return i.value=a.items,a}finally{e.value=!1}}async function m(t){await F(t),await f()}async function g(t){await P(t)}function C(t){n.value&&(n.value={...n.value,is_favorited:t})}function D(t,a){i.value=i.value.map(s=>s.id===t?{...s,is_favorited:a}:s)}async function c(){e.value=!0;try{const t=await S();return o.value=t,t}catch{return o.value=[],[]}finally{e.value=!1}}async function h(t){const a=await x(t);return await c(),a}async function p(t){await I(t),await c()}function $(){n.value=null,u.value=null}function b(t){l.value=t}function H(){const t=l.value;return l.value=null,t}return{currentEssay:n,currentCorrection:u,history:i,drafts:o,loading:e,submitEssay:d,fetchEssay:E,fetchCorrection:w,fetchHistory:f,deleteEssay:m,favoriteEssay:g,setCurrentEssayFavorited:C,setHistoryItemFavorited:D,fetchDrafts:c,createDraft:h,deleteDraft:p,clearCurrent:$,setPendingResetContent:b,takePendingResetContent:H}});export{q as u};
//# sourceMappingURL=essay-DXTx9Sb7.js.map
