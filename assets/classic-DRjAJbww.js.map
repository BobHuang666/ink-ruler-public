{"version":3,"file":"classic-DRjAJbww.js","sources":["../../src/api/classic.ts"],"sourcesContent":["import request from '@/utils/request'\nimport type { ClassicItem, SearchMode, UpdateLikeBody, UpdateLikeResponse } from '@/types/classic'\n\nconst BASE = '/classic'\n\nexport function browse(params: {\n  ids?: string\n  random?: number\n  categories?: string[]\n  authors?: string[]\n  dynasties?: string[]\n  genres?: string[]\n}): Promise<ClassicItem[]> {\n  const p: Record<string, string | number> = {}\n  if (params.ids) p.ids = params.ids\n  if (params.random != null) p.random = params.random\n  const q = new URLSearchParams(p as Record<string, string>)\n  ;['categories', 'authors', 'dynasties', 'genres'].forEach((key) => {\n    const arr = params[key as keyof typeof params]\n    if (Array.isArray(arr)) arr.forEach((v) => q.append(key, v))\n  })\n  return request.get<ClassicItem[]>(`${BASE}/browse?${q.toString()}`).then((r) => r.data ?? [])\n}\n\nexport function search(q: string, mode: SearchMode = 'keyword'): Promise<ClassicItem[]> {\n  return request\n    .get<ClassicItem[]>(`${BASE}/search`, { params: { q, mode } })\n    .then((r) => r.data ?? [])\n}\n\nexport function all(): Promise<ClassicItem[]> {\n  return request.get<ClassicItem[]>(`${BASE}/all`).then((r) => r.data ?? [])\n}\n\nexport function getItem(id: number): Promise<ClassicItem> {\n  return request.get<ClassicItem>(`${BASE}/items/${id}`).then((r) => r.data!)\n}\n\nexport function similar(id: number): Promise<ClassicItem[]> {\n  return request.get<ClassicItem[]>(`${BASE}/items/${id}/similar`).then((r) => r.data ?? [])\n}\n\nexport function updateLike(id: number, body: UpdateLikeBody): Promise<UpdateLikeResponse> {\n  return request\n    .post<UpdateLikeResponse>(`${BASE}/items/${id}/update_like`, body)\n    .then((r) => r.data!)\n}\n\nexport function favorite(id: number): Promise<void> {\n  return request.post(`${BASE}/items/${id}/favorite`).then(() => {})\n}\n\nexport function unfavorite(id: number): Promise<void> {\n  return request.delete(`${BASE}/items/${id}/favorite`).then(() => {})\n}\n\nexport function getClassicFavorites(): Promise<ClassicItem[]> {\n  return request.get<ClassicItem[]>(`${BASE}/favorites`).then((r) => r.data ?? [])\n}\n"],"names":["BASE","browse","params","p","q","key","arr","v","request","r","search","mode","all","getItem","id","similar","updateLike","body","favorite","unfavorite","getClassicFavorites"],"mappings":"wCAGA,MAAMA,EAAO,WAEN,SAASC,EAAOC,EAOI,CACzB,MAAMC,EAAqC,CAAA,EACvCD,EAAO,MAAKC,EAAE,IAAMD,EAAO,KAC3BA,EAAO,QAAU,OAAMC,EAAE,OAASD,EAAO,QAC7C,MAAME,EAAI,IAAI,gBAAgBD,CAA2B,EACxD,OAAC,aAAc,UAAW,YAAa,QAAQ,EAAE,QAASE,GAAQ,CACjE,MAAMC,EAAMJ,EAAOG,CAA0B,EACzC,MAAM,QAAQC,CAAG,GAAGA,EAAI,QAASC,GAAMH,EAAE,OAAOC,EAAKE,CAAC,CAAC,CAC7D,CAAC,EACMC,EAAQ,IAAmB,GAAGR,CAAI,WAAWI,EAAE,SAAA,CAAU,EAAE,EAAE,KAAMK,GAAMA,EAAE,MAAQ,EAAE,CAC9F,CAEO,SAASC,EAAON,EAAWO,EAAmB,UAAmC,CACtF,OAAOH,EACJ,IAAmB,GAAGR,CAAI,UAAW,CAAE,OAAQ,CAAE,EAAAI,EAAG,KAAAO,EAAK,CAAG,EAC5D,KAAM,GAAM,EAAE,MAAQ,EAAE,CAC7B,CAEO,SAASC,GAA8B,CAC5C,OAAOJ,EAAQ,IAAmB,GAAGR,CAAI,MAAM,EAAE,KAAMS,GAAMA,EAAE,MAAQ,CAAA,CAAE,CAC3E,CAEO,SAASI,EAAQC,EAAkC,CACxD,OAAON,EAAQ,IAAiB,GAAGR,CAAI,UAAUc,CAAE,EAAE,EAAE,KAAML,GAAMA,EAAE,IAAK,CAC5E,CAEO,SAASM,EAAQD,EAAoC,CAC1D,OAAON,EAAQ,IAAmB,GAAGR,CAAI,UAAUc,CAAE,UAAU,EAAE,KAAML,GAAMA,EAAE,MAAQ,CAAA,CAAE,CAC3F,CAEO,SAASO,EAAWF,EAAYG,EAAmD,CACxF,OAAOT,EACJ,KAAyB,GAAGR,CAAI,UAAUc,CAAE,eAAgBG,CAAI,EAChE,KAAM,GAAM,EAAE,IAAK,CACxB,CAEO,SAASC,EAASJ,EAA2B,CAClD,OAAON,EAAQ,KAAK,GAAGR,CAAI,UAAUc,CAAE,WAAW,EAAE,KAAK,IAAM,CAAC,CAAC,CACnE,CAEO,SAASK,EAAWL,EAA2B,CACpD,OAAON,EAAQ,OAAO,GAAGR,CAAI,UAAUc,CAAE,WAAW,EAAE,KAAK,IAAM,CAAC,CAAC,CACrE,CAEO,SAASM,GAA8C,CAC5D,OAAOZ,EAAQ,IAAmB,GAAGR,CAAI,YAAY,EAAE,KAAMS,GAAMA,EAAE,MAAQ,CAAA,CAAE,CACjF"}