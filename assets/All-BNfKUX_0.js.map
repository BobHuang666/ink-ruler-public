{"version":3,"file":"All-BNfKUX_0.js","sources":["../../src/views/classic/All.vue"],"sourcesContent":["<template>\n  <div class=\"classic-all-page\">\n    <div class=\"page-bg\">\n      <div class=\"page-bg-gradient\" />\n    </div>\n    <div class=\"all-inner\">\n      <section class=\"header\">\n        <h1 class=\"title title-font\">句海漫游</h1>\n        <p class=\"subtitle content-font\">随机探索传统文化瑰宝</p>\n        <el-button v-if=\"items.length > 0\" type=\"primary\" :loading=\"loading\" @click=\"handleRefresh\"\n          >换一批</el-button\n        >\n      </section>\n      <section v-if=\"loading && items.length === 0\" class=\"loading-wrap\">\n        <el-icon class=\"is-loading\" :size=\"32\"><Loading /></el-icon>\n      </section>\n      <section v-else-if=\"items.length === 0 && !loading\" class=\"empty-wrap\">\n        <el-empty description=\"暂无素材，请稍后再试\">\n          <el-button type=\"primary\" @click=\"handleRefresh\">重新加载</el-button>\n        </el-empty>\n      </section>\n      <section v-else class=\"grid-wrap\">\n        <router-link\n          v-for=\"item in items\"\n          :key=\"item.id\"\n          :to=\"`/classic/item/${item.id}`\"\n          class=\"item-card\"\n        >\n          <p class=\"original content-font\">{{ item.original_text }}</p>\n          <p v-if=\"item.translation\" class=\"translation\">{{ item.translation }}</p>\n          <div class=\"meta\">\n            <span v-if=\"item.author\">{{ item.author }}</span>\n            <span v-if=\"item.dynasty\">{{ item.dynasty }}</span>\n            <span v-if=\"item.genre\">{{ item.genre }}</span>\n          </div>\n        </router-link>\n      </section>\n      <section v-if=\"items.length > 0\" class=\"footer-actions\">\n        <el-button type=\"primary\" :loading=\"loading\" @click=\"handleRefresh\">换一批</el-button>\n      </section>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onActivated } from 'vue'\nimport { Loading } from '@element-plus/icons-vue'\nimport { all } from '@/api/classic'\nimport type { ClassicItem } from '@/types/classic'\nimport { getNavigationFrom } from '@/router'\n\ndefineOptions({ name: 'ClassicAll' })\n\nconst items = ref<ClassicItem[]>([])\nconst loading = ref(false)\n\nasync function fetchMore() {\n  loading.value = true\n  try {\n    const list = await all()\n    items.value = list ?? []\n  } finally {\n    loading.value = false\n  }\n}\n\nasync function handleRefresh() {\n  await fetchMore()\n  window.scrollTo({ top: 0, behavior: 'smooth' })\n}\n\nonActivated(() => {\n  // 从详情页返回时不刷新，其他情况刷新\n  const from = getNavigationFrom()\n  if (from?.name === 'ClassicItemDetail') return\n  fetchMore()\n})\n</script>\n\n<style scoped>\n.classic-all-page {\n  position: relative;\n  min-height: calc(100vh - var(--header-height) - 80px);\n}\n.page-bg {\n  position: absolute;\n  inset: 0;\n  z-index: -1;\n}\n.page-bg-gradient {\n  position: absolute;\n  inset: 0;\n  background: var(--page-bg-gradient);\n}\n.all-inner {\n  max-width: 64rem;\n  margin: 0 auto;\n  padding: 32px 16px;\n}\n.header {\n  text-align: center;\n  margin-bottom: 32px;\n}\n.title {\n  font-size: 2rem;\n  font-weight: 600;\n  margin-bottom: var(--spacing-sm);\n  color: var(--color-text-primary);\n}\n.subtitle {\n  font-size: var(--font-size-lg);\n  color: var(--color-text-regular);\n  margin-bottom: var(--spacing-md);\n}\n.loading-wrap {\n  display: flex;\n  justify-content: center;\n  padding: 48px;\n}\n.empty-wrap {\n  display: flex;\n  justify-content: center;\n  padding: 48px;\n}\n.grid-wrap {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: var(--spacing-md);\n}\n.item-card {\n  display: block;\n  padding: var(--spacing-lg);\n  background: var(--card-gradient);\n  border-radius: var(--border-radius-base);\n  border: 1px solid rgba(214, 211, 209, 0.7);\n  box-shadow: var(--card-shadow);\n  text-decoration: none;\n  color: inherit;\n  transition:\n    box-shadow 0.2s,\n    transform 0.2s,\n    background 0.2s;\n  backdrop-filter: blur(2px);\n}\n.item-card:hover {\n  box-shadow: var(--box-shadow-dark);\n  transform: translateY(-2px);\n  background: var(--card-gradient-hover);\n}\n.original {\n  font-size: var(--font-size-base);\n  line-height: 1.6;\n  margin-bottom: var(--spacing-sm);\n  color: var(--color-text-primary);\n}\n.translation {\n  font-size: var(--font-size-sm);\n  color: var(--color-text-regular);\n  margin-bottom: var(--spacing-xs);\n}\n.meta {\n  font-size: var(--font-size-xs);\n  color: var(--color-text-secondary);\n}\n.meta span + span::before {\n  content: ' · ';\n}\n.footer-actions {\n  text-align: center;\n  margin-top: 40px;\n  padding-top: 24px;\n}\n</style>\n"],"names":["items","ref","loading","fetchMore","list","all","handleRefresh","onActivated","getNavigationFrom","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_cache","_createBlock","_component_el_button","_hoisted_4","_createVNode","_component_el_icon","_unref","Loading","_hoisted_5","_component_el_empty","_hoisted_6","_Fragment","_renderList","item","_component_router_link","_hoisted_7","_toDisplayString","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13"],"mappings":"+iBAqDA,MAAMA,EAAQC,EAAmB,EAAE,EAC7BC,EAAUD,EAAI,EAAK,EAEzB,eAAeE,GAAY,CACzBD,EAAQ,MAAQ,GAChB,GAAI,CACF,MAAME,EAAO,MAAMC,EAAA,EACnBL,EAAM,MAAQI,GAAQ,CAAA,CACxB,QAAA,CACEF,EAAQ,MAAQ,EAClB,CACF,CAEA,eAAeI,GAAgB,CAC7B,MAAMH,EAAA,EACN,OAAO,SAAS,CAAE,IAAK,EAAG,SAAU,SAAU,CAChD,CAEA,OAAAI,EAAY,IAAM,CAEHC,EAAA,GACH,OAAS,qBACnBL,EAAA,CACF,CAAC,mFA3EC,OAAAM,EAAA,EAAAC,EAwCM,MAxCNC,EAwCM,aAvCJC,EAEM,MAAA,CAFD,MAAM,WAAS,CAClBA,EAAgC,MAAA,CAA3B,MAAM,mBAAkB,CAAA,OAE/BA,EAmCM,MAnCNC,EAmCM,CAlCJD,EAMU,UANVE,EAMU,CALRC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAsC,KAAA,CAAlC,MAAM,kBAAA,EAAmB,OAAI,EAAA,GACjCG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAA+C,IAAA,CAA5C,MAAM,uBAAA,EAAwB,aAAU,EAAA,GAC1BZ,EAAA,MAAM,OAAM,OAA7BgB,EAECC,EAAA,OAFkC,KAAK,UAAW,QAASf,EAAA,MAAU,QAAOI,CAAA,aAC1E,IAAG,CAAA,GAAAS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAH,MAAG,EAAA,CAAA,qCAGOb,EAAA,OAAWF,EAAA,MAAM,SAAM,GAAtCS,IAAAC,EAEU,UAFVQ,EAEU,CADRC,EAA4DC,EAAA,CAAnD,MAAM,aAAc,KAAM,EAAA,aAAI,IAAW,CAAXD,EAAWE,EAAAC,CAAA,CAAA,CAAA,YAEhCtB,EAAA,MAAM,SAAM,GAAA,CAAWE,EAAA,OAA3CO,EAAA,EAAAC,EAIU,UAJVa,EAIU,CAHRJ,EAEWK,EAAA,CAFD,YAAY,cAAY,WAChC,IAAiE,CAAjEL,EAAiEF,EAAA,CAAtD,KAAK,UAAW,QAAOX,CAAA,aAAe,IAAI,CAAA,GAAAS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAJ,OAAI,EAAA,CAAA,uBAGzDN,EAAA,EAAAC,EAeU,UAfVe,EAeU,QAdRf,EAacgB,EAAA,KAAAC,EAZG3B,EAAA,MAAR4B,QADTZ,EAaca,EAAA,CAXX,IAAKD,EAAK,GACV,GAAE,iBAAmBA,EAAK,EAAE,GAC7B,MAAM,WAAA,aAEN,IAA6D,CAA7DhB,EAA6D,IAA7DkB,EAA6DC,EAAzBH,EAAK,aAAa,EAAA,CAAA,EAC7CA,EAAK,aAAdnB,EAAA,EAAAC,EAAyE,IAAzEsB,EAAyED,EAAvBH,EAAK,WAAW,EAAA,CAAA,YAClEhB,EAIM,MAJNqB,EAIM,CAHQL,EAAK,YAAjBlB,EAAiD,OAAAwB,EAAAH,EAArBH,EAAK,MAAM,EAAA,CAAA,YAC3BA,EAAK,aAAjBlB,EAAmD,OAAAyB,EAAAJ,EAAtBH,EAAK,OAAO,EAAA,CAAA,YAC7BA,EAAK,WAAjBlB,EAA+C,OAAA0B,EAAAL,EAApBH,EAAK,KAAK,EAAA,CAAA,6CAI5B5B,EAAA,MAAM,OAAM,GAA3BS,IAAAC,EAEU,UAFV2B,EAEU,CADRlB,EAAmFF,EAAA,CAAxE,KAAK,UAAW,QAASf,EAAA,MAAU,QAAOI,CAAA,aAAe,IAAG,CAAA,GAAAS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAH,MAAG,EAAA,CAAA"}