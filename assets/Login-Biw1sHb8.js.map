{"version":3,"file":"Login-Biw1sHb8.js","sources":["../../src/views/auth/Login.vue"],"sourcesContent":["<template>\n  <div class=\"login-page\">\n    <div class=\"login-container\">\n      <el-card class=\"login-card\" shadow=\"always\">\n        <template #header>\n          <div class=\"card-header\">\n            <h2>登录</h2>\n            <p class=\"subtitle\">欢迎回来</p>\n          </div>\n        </template>\n\n        <el-form\n          ref=\"formRef\"\n          :model=\"form\"\n          :rules=\"rules\"\n          label-width=\"0\"\n          @submit.prevent=\"handleLogin\"\n        >\n          <el-form-item prop=\"emailOrPhone\">\n            <el-input\n              v-model=\"form.emailOrPhone\"\n              placeholder=\"邮箱或手机号\"\n              size=\"large\"\n              :prefix-icon=\"User\"\n            />\n          </el-form-item>\n\n          <el-form-item prop=\"password\">\n            <el-input\n              v-model=\"form.password\"\n              type=\"password\"\n              placeholder=\"密码\"\n              size=\"large\"\n              :prefix-icon=\"Lock\"\n              show-password\n              @keyup.enter=\"handleLogin\"\n            />\n          </el-form-item>\n\n          <el-form-item>\n            <div class=\"form-actions\">\n              <el-checkbox v-model=\"rememberMe\">记住我</el-checkbox>\n              <el-link type=\"primary\" :underline=\"false\">忘记密码？</el-link>\n            </div>\n          </el-form-item>\n\n          <el-form-item>\n            <el-button\n              type=\"primary\"\n              size=\"large\"\n              :loading=\"loading\"\n              class=\"login-button\"\n              @click=\"handleLogin\"\n            >\n              登录\n            </el-button>\n          </el-form-item>\n\n          <el-divider>或</el-divider>\n\n          <el-form-item>\n            <el-button size=\"large\" class=\"register-button\" @click=\"$router.push('/register')\">\n              注册账号\n            </el-button>\n          </el-form-item>\n        </el-form>\n\n        <div class=\"demo-tip\">\n          <el-alert title=\"演示账号\" type=\"info\" :closable=\"false\" show-icon>\n            <p>管理员：admin@ink.com / 666666</p>\n            <p>学生：student@ink.com / 666666</p>\n          </el-alert>\n        </div>\n      </el-card>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, reactive } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { useAuthStore } from '@/stores/auth'\nimport { User, Lock } from '@element-plus/icons-vue'\nimport { ElMessage, type FormInstance, type FormRules } from 'element-plus'\n\nconst router = useRouter()\nconst route = useRoute()\nconst authStore = useAuthStore()\n\nconst formRef = ref<FormInstance>()\nconst loading = ref(false)\nconst rememberMe = ref(false)\n\nconst form = reactive({\n  emailOrPhone: '',\n  password: '',\n})\n\nconst rules: FormRules = {\n  emailOrPhone: [{ required: true, message: '请输入邮箱或手机号', trigger: 'blur' }],\n  password: [\n    { required: true, message: '请输入密码', trigger: 'blur' },\n    { min: 6, message: '密码长度不能少于6位', trigger: 'blur' },\n  ],\n}\n\nasync function handleLogin() {\n  if (!formRef.value) return\n\n  await formRef.value.validate(async (valid) => {\n    if (valid) {\n      loading.value = true\n      try {\n        await authStore.login(form.emailOrPhone, form.password)\n        ElMessage.success('登录成功')\n\n        const redirect = (route.query.redirect as string) || '/'\n        router.push(redirect)\n      } catch (error: unknown) {\n        ElMessage.error((error as Error).message || '登录失败')\n      } finally {\n        loading.value = false\n      }\n    }\n  })\n}\n</script>\n\n<style scoped>\n.login-page {\n  min-height: calc(100vh - 64px - 80px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: var(--spacing-lg);\n  background: var(--bg-color-page);\n}\n\n.login-container {\n  width: 100%;\n  max-width: 420px;\n}\n\n.login-card {\n  border-radius: var(--border-radius-large);\n}\n\n.card-header {\n  text-align: center;\n}\n\n.card-header h2 {\n  font-size: var(--font-size-xxl);\n  font-weight: 600;\n  margin-bottom: var(--spacing-xs);\n  color: var(--color-text-primary);\n}\n\n.subtitle {\n  color: var(--color-text-secondary);\n  font-size: var(--font-size-sm);\n}\n\n.form-actions {\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.login-button {\n  width: 100%;\n}\n\n.register-button {\n  width: 100%;\n}\n\n.demo-tip {\n  margin-top: var(--spacing-md);\n}\n\n.demo-tip p {\n  margin: var(--spacing-xs) 0;\n  font-size: var(--font-size-xs);\n}\n</style>\n"],"names":["router","useRouter","route","useRoute","authStore","useAuthStore","formRef","ref","loading","rememberMe","form","reactive","rules","handleLogin","valid","ElMessage","redirect","error","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_el_card","_cache","_component_el_form","_component_el_form_item","_component_el_input","$event","_unref","User","Lock","_hoisted_3","_component_el_checkbox","_component_el_link","_component_el_button","_component_el_divider","$router","_hoisted_4","_component_el_alert"],"mappings":"iTAqFA,MAAMA,EAASC,EAAA,EACTC,EAAQC,EAAA,EACRC,EAAYC,EAAA,EAEZC,EAAUC,EAAA,EACVC,EAAUD,EAAI,EAAK,EACnBE,EAAaF,EAAI,EAAK,EAEtBG,EAAOC,EAAS,CACpB,aAAc,GACd,SAAU,EAAA,CACX,EAEKC,EAAmB,CACvB,aAAc,CAAC,CAAE,SAAU,GAAM,QAAS,YAAa,QAAS,OAAQ,EACxE,SAAU,CACR,CAAE,SAAU,GAAM,QAAS,QAAS,QAAS,MAAA,EAC7C,CAAE,IAAK,EAAG,QAAS,aAAc,QAAS,MAAA,CAAO,CACnD,EAGF,eAAeC,GAAc,CACtBP,EAAQ,OAEb,MAAMA,EAAQ,MAAM,SAAS,MAAOQ,GAAU,CAC5C,GAAIA,EAAO,CACTN,EAAQ,MAAQ,GAChB,GAAI,CACF,MAAMJ,EAAU,MAAMM,EAAK,aAAcA,EAAK,QAAQ,EACtDK,EAAU,QAAQ,MAAM,EAExB,MAAMC,EAAYd,EAAM,MAAM,UAAuB,IACrDF,EAAO,KAAKgB,CAAQ,CACtB,OAASC,EAAgB,CACvBF,EAAU,MAAOE,EAAgB,SAAW,MAAM,CACpD,QAAA,CACET,EAAQ,MAAQ,EAClB,CACF,CACF,CAAC,CACH,4KA5HE,OAAAU,EAAA,EAAAC,EA0EM,MA1ENC,EA0EM,CAzEJC,EAwEM,MAxENC,EAwEM,CAvEJC,EAsEUC,EAAA,CAtED,MAAM,aAAa,OAAO,QAAA,GACtB,SACT,IAGM,CAAA,GAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAHNJ,EAGM,MAAA,CAHD,MAAM,eAAa,CACtBA,EAAW,UAAP,IAAE,EACNA,EAA4B,IAAA,CAAzB,MAAM,UAAA,EAAW,MAAI,CAAA,oBAI5B,IAsDU,CAtDVE,EAsDUG,EAAA,SArDJ,UAAJ,IAAIpB,EACH,MAAOI,EACP,MAAAE,EACD,cAAY,IACX,WAAgBC,EAAW,CAAA,SAAA,CAAA,CAAA,aAE5B,IAOe,CAPfU,EAOeI,EAAA,CAPD,KAAK,gBAAc,WAC/B,IAKE,CALFJ,EAKEK,EAAA,CAJS,WAAAlB,EAAK,aAAL,sBAAAe,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAI,GAAAnB,EAAK,aAAYmB,GAC1B,YAAY,SACZ,KAAK,QACJ,cAAaC,EAAAC,CAAA,CAAA,+CAIlBR,EAUeI,EAAA,CAVD,KAAK,YAAU,WAC3B,IAQE,CARFJ,EAQEK,EAAA,CAPS,WAAAlB,EAAK,SAAL,sBAAAe,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAI,GAAAnB,EAAK,SAAQmB,GACtB,KAAK,WACL,YAAY,KACZ,KAAK,QACJ,cAAaC,EAAAE,CAAA,EACd,gBAAA,GACC,UAAanB,EAAW,CAAA,OAAA,CAAA,CAAA,+CAI7BU,EAKeI,EAAA,KAAA,WAJb,IAGM,CAHNN,EAGM,MAHNY,EAGM,CAFJV,EAAmDW,EAAA,YAA7BzB,EAAA,2CAAAA,EAAU,MAAAoB,EAAA,aAAE,IAAG,CAAA,GAAAJ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAH,MAAG,EAAA,CAAA,4BACrCF,EAA0DY,EAAA,CAAjD,KAAK,UAAW,UAAW,EAAA,aAAO,IAAK,CAAA,GAAAV,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAL,QAAK,EAAA,CAAA,qBAIpDF,EAUeI,EAAA,KAAA,WATb,IAQY,CARZJ,EAQYa,EAAA,CAPV,KAAK,UACL,KAAK,QACJ,QAAS5B,EAAA,MACV,MAAM,eACL,QAAOK,CAAA,aACT,IAED,CAAA,GAAAY,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAFC,OAED,EAAA,CAAA,iCAGFF,EAA0Bc,EAAA,KAAA,WAAd,IAAC,CAAA,GAAAZ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAD,IAAC,EAAA,CAAA,WAEbF,EAIeI,EAAA,KAAA,WAHb,IAEY,CAFZJ,EAEYa,EAAA,CAFD,KAAK,QAAQ,MAAM,kBAAmB,QAAKX,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAI,GAAES,EAAAA,QAAQ,KAAI,WAAA,EAAA,aAAe,IAEnF,CAAA,GAAAb,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAFmF,SAEnF,EAAA,CAAA,uCAIJJ,EAKM,MALNkB,EAKM,CAJJhB,EAGWiB,EAAA,CAHD,MAAM,OAAO,KAAK,OAAQ,SAAU,GAAO,YAAA,EAAA,aACnD,IAAiC,CAAA,GAAAf,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,CAAjCJ,EAAiC,SAA9B,6BAA0B,EAAA,EAC7BA,EAAkC,SAA/B,8BAA2B,EAAA,CAAA"}