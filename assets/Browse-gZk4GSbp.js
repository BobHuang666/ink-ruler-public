import{d as j,m as A,l as b,O as w,n as E,c as r,a as i,b as g,e as a,w as s,r as u,F as V,x,g as B,f as L,Y as T,j as Y,D as m,o,_ as $}from"./index-BbY8ega0.js";import{b as C}from"./classic-BQJPRF9i.js";const q={class:"classic-browse-page"},G={class:"browse-inner"},H={class:"filters"},J={key:0,class:"loading-wrap"},K={key:1,class:"list-wrap"},Q={class:"original content-font"},R={key:0,class:"translation"},W={class:"meta"},X={key:0},Z={key:1},ee={key:2},te={key:2,class:"pagination-wrap"},y=20,ae=j({__name:"Browse",setup(le){const U=["先秦","汉","三国","晋","南北朝","隋","唐","五代","宋","辽","金","元","明","清","近现代"],l=A({categories:"",authors:"",dynasties:"",genres:""}),d=b([]),c=b(!1),p=b(1),N=w(()=>Math.ceil(d.value.length/y)||1),P=w(()=>{const n=(p.value-1)*y;return d.value.slice(n,n+y)});function f(n){return n?.trim()?[n.trim()]:[]}async function z(){c.value=!0;try{const n=await C({categories:f(l.categories),authors:f(l.authors),dynasties:f(l.dynasties),genres:f(l.genres)});d.value=n??[],p.value=1}finally{c.value=!1}}async function h(){c.value=!0;try{const n=await C({random:20});d.value=n??[],p.value=1}finally{c.value=!1}}return E(()=>{h()}),(n,t)=>{const v=u("el-input"),_=u("el-form-item"),F=u("el-option"),D=u("el-select"),k=u("el-button"),I=u("el-form"),M=u("el-icon"),O=u("router-link"),S=u("el-pagination");return o(),r("div",q,[t[8]||(t[8]=i("div",{class:"page-bg"},[i("div",{class:"page-bg-image"}),i("div",{class:"page-bg-gradient"})],-1)),i("div",G,[t[7]||(t[7]=i("section",{class:"header"},[i("h1",{class:"title title-font"},"分类浏览"),i("p",{class:"subtitle content-font"},"按分类、作者、朝代、体裁筛选")],-1)),i("section",H,[a(I,{inline:!0,class:"filter-form"},{default:s(()=>[a(_,{label:"分类"},{default:s(()=>[a(v,{modelValue:l.categories,"onUpdate:modelValue":t[0]||(t[0]=e=>l.categories=e),placeholder:"如：家国情怀",clearable:"",style:{width:"140px"}},null,8,["modelValue"])]),_:1}),a(_,{label:"作者"},{default:s(()=>[a(v,{modelValue:l.authors,"onUpdate:modelValue":t[1]||(t[1]=e=>l.authors=e),placeholder:"如：杜甫",clearable:"",style:{width:"120px"}},null,8,["modelValue"])]),_:1}),a(_,{label:"朝代"},{default:s(()=>[a(D,{modelValue:l.dynasties,"onUpdate:modelValue":t[2]||(t[2]=e=>l.dynasties=e),placeholder:"朝代",clearable:"",style:{width:"120px"}},{default:s(()=>[(o(),r(V,null,x(U,e=>a(F,{key:e,label:e,value:e},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),a(_,{label:"体裁"},{default:s(()=>[a(v,{modelValue:l.genres,"onUpdate:modelValue":t[3]||(t[3]=e=>l.genres=e),placeholder:"如：诗",clearable:"",style:{width:"100px"}},null,8,["modelValue"])]),_:1}),a(_,null,{default:s(()=>[a(k,{type:"primary",onClick:z},{default:s(()=>[...t[5]||(t[5]=[B("筛选",-1)])]),_:1}),a(k,{onClick:h},{default:s(()=>[...t[6]||(t[6]=[B("随机一批",-1)])]),_:1})]),_:1})]),_:1})]),c.value?(o(),r("div",J,[a(M,{class:"is-loading",size:32},{default:s(()=>[a(L(T))]),_:1})])):(o(),r("div",K,[(o(!0),r(V,null,x(P.value,e=>(o(),Y(O,{key:e.id,to:`/classic/item/${e.id}`,class:"item-card"},{default:s(()=>[i("p",Q,m(e.original_text),1),e.translation?(o(),r("p",R,m(e.translation),1)):g("",!0),i("div",W,[e.author?(o(),r("span",X,m(e.author),1)):g("",!0),e.dynasty?(o(),r("span",Z,m(e.dynasty),1)):g("",!0),e.genre?(o(),r("span",ee,m(e.genre),1)):g("",!0)])]),_:2},1032,["to"]))),128))])),N.value>1?(o(),r("div",te,[a(S,{"current-page":p.value,"onUpdate:currentPage":t[4]||(t[4]=e=>p.value=e),"page-size":y,total:d.value.length,layout:"prev, pager, next"},null,8,["current-page","total"])])):g("",!0)])])}}}),ne=$(ae,[["__scopeId","data-v-8440d10c"]]);export{ne as default};
//# sourceMappingURL=Browse-gZk4GSbp.js.map
