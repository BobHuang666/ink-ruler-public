import{d as z,u as R,k as v,l as E,c as U,a as i,e as r,w as s,r as n,p as $,f as d,G as q,H as A,s as B,z as V,y as N,g as m,A as S,E as y,o as K,_ as M}from"./index-Bn_Xs3lU.js";const G={class:"register-page"},H={class:"register-container"},I={class:"agreement-row"},T={class:"agreement-links"},j=z({name:"Register",__name:"Register",setup(D){const p=S(),k=R(),f=v(),g=v(!1),o=E({email:"",email_code:"",phone:"",nickname:"",password:"",confirmPassword:"",agreement:!1}),x={email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],phone:[{validator:(u,e,l)=>{if(!e||!e.trim()){l();return}/^1[3-9]\d{9}$/.test(e.trim())?l():l(new Error("请输入正确的手机号格式"))},trigger:"blur"}],nickname:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:2,max:20,message:"昵称长度在2到20个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(u,e,l)=>{e!==o.password?l(new Error("两次输入的密码不一致")):l()},trigger:"blur"}],agreement:[{validator:(u,e,l)=>{e?l():l(new Error("请先同意服务条款"))},trigger:"change"}]};async function _(){f.value&&await f.value.validate(async u=>{if(u){g.value=!0;try{await k.register({email:o.email,email_code:o.email_code,phone:o.phone||void 0,password:o.password,nickname:o.nickname}),y.success("注册成功，请登录"),p.push("/login")}catch(e){y.error(e.message||"注册失败")}finally{g.value=!1}}})}return(u,e)=>{const l=n("el-input"),t=n("el-form-item"),b=n("el-checkbox"),c=n("el-link"),w=n("el-button"),C=n("el-divider"),P=n("el-form"),h=n("el-card");return K(),U("div",G,[i("div",H,[r(h,{class:"register-card",shadow:"always"},{header:s(()=>[...e[9]||(e[9]=[i("div",{class:"card-header"},[i("h2",{class:"header-font"},"注册"),i("p",{class:"subtitle content-font"},"创建你的账号")],-1)])]),default:s(()=>[r(P,{ref_key:"formRef",ref:f,model:o,rules:x,"label-width":"0",onSubmit:$(_,["prevent"])},{default:s(()=>[r(t,{prop:"email"},{default:s(()=>[r(l,{modelValue:o.email,"onUpdate:modelValue":e[0]||(e[0]=a=>o.email=a),placeholder:"邮箱",size:"large","prefix-icon":d(q)},null,8,["modelValue","prefix-icon"])]),_:1}),r(t,{prop:"phone"},{default:s(()=>[r(l,{modelValue:o.phone,"onUpdate:modelValue":e[1]||(e[1]=a=>o.phone=a),placeholder:"手机号（可选）",size:"large","prefix-icon":d(A)},null,8,["modelValue","prefix-icon"])]),_:1}),r(t,{prop:"nickname"},{default:s(()=>[r(l,{modelValue:o.nickname,"onUpdate:modelValue":e[2]||(e[2]=a=>o.nickname=a),placeholder:"昵称",size:"large","prefix-icon":d(B)},null,8,["modelValue","prefix-icon"])]),_:1}),r(t,{prop:"password"},{default:s(()=>[r(l,{modelValue:o.password,"onUpdate:modelValue":e[3]||(e[3]=a=>o.password=a),type:"password",placeholder:"密码（至少6位）",size:"large","prefix-icon":d(V),"show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),r(t,{prop:"confirmPassword"},{default:s(()=>[r(l,{modelValue:o.confirmPassword,"onUpdate:modelValue":e[4]||(e[4]=a=>o.confirmPassword=a),type:"password",placeholder:"确认密码",size:"large","prefix-icon":d(V),"show-password":"",onKeyup:N(_,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),r(t,{prop:"agreement",class:"agreement-item"},{default:s(()=>[i("div",I,[r(b,{modelValue:o.agreement,"onUpdate:modelValue":e[5]||(e[5]=a=>o.agreement=a)},{default:s(()=>[...e[10]||(e[10]=[m("我已阅读并同意",-1)])]),_:1},8,["modelValue"]),i("span",T,[r(c,{type:"primary",underline:"never",onClick:e[6]||(e[6]=a=>d(p).push("/terms"))},{default:s(()=>[...e[11]||(e[11]=[m(" 《服务条款》 ",-1)])]),_:1}),e[13]||(e[13]=i("span",{class:"agreement-and"},"和",-1)),r(c,{type:"primary",underline:"never",onClick:e[7]||(e[7]=a=>d(p).push("/privacy"))},{default:s(()=>[...e[12]||(e[12]=[m(" 《隐私政策》 ",-1)])]),_:1})])])]),_:1}),r(t,null,{default:s(()=>[r(w,{type:"primary",size:"large",loading:g.value,class:"register-button",onClick:_},{default:s(()=>[...e[14]||(e[14]=[m(" 注册 ",-1)])]),_:1},8,["loading"])]),_:1}),r(C,null,{default:s(()=>[...e[15]||(e[15]=[m("或",-1)])]),_:1}),r(t,null,{default:s(()=>[r(w,{size:"large",class:"login-button",onClick:e[8]||(e[8]=a=>u.$router.push("/login"))},{default:s(()=>[...e[16]||(e[16]=[m(" 已有账号？登录 ",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])])}}}),Q=M(j,[["__scopeId","data-v-63203864"]]);export{Q as default};
//# sourceMappingURL=Register-6QXbD0vN.js.map
