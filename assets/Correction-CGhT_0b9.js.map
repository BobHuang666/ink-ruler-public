{"version":3,"file":"Correction-CGhT_0b9.js","sources":["../../src/components/Essay/EssayEditor.vue","../../src/components/Essay/CorrectionResult.vue","../../src/views/essay/Correction.vue"],"sourcesContent":["<template>\n  <div class=\"essay-editor\">\n    <el-form :model=\"form\" label-width=\"80px\">\n      <el-form-item label=\"题目\">\n        <el-input v-model=\"form.title\" placeholder=\"请输入作文题目（可选）\" />\n      </el-form-item>\n      <el-form-item label=\"类型\">\n        <el-select\n          v-model=\"form.prompt\"\n          filterable\n          allow-create\n          clearable\n          default-first-option\n          placeholder=\"请选择或输入作文类型（可选）\"\n          style=\"width: 100%\"\n        >\n          <el-option label=\"议论文\" value=\"议论文\" />\n          <el-option label=\"记叙文\" value=\"记叙文\" />\n          <el-option label=\"应用文\" value=\"应用文\" />\n          <el-option label=\"说明文\" value=\"说明文\" />\n          <el-option label=\"散文\" value=\"散文\" />\n          <el-option label=\"其他\" value=\"其他\" />\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"内容\">\n        <!-- 无文件时：只显示上传区域 -->\n        <el-upload\n          v-if=\"!fileList.length\"\n          class=\"essay-upload\"\n          v-model:file-list=\"fileList\"\n          :auto-upload=\"false\"\n          :limit=\"1\"\n          :show-file-list=\"false\"\n          :on-change=\"handleFileChange\"\n          accept=\".docx,.doc\"\n          drag\n        >\n          <el-icon class=\"el-icon--upload\"><upload-filled /></el-icon>\n          <div class=\"el-upload__text\">将Word文件拖到此处，或<em>点击上传</em></div>\n          <template #tip>\n            <div class=\"el-upload__tip\">支持Word文档，文件大小不超过1MB</div>\n          </template>\n        </el-upload>\n        <!-- 有文件时：只显示文件列表 -->\n        <div v-else class=\"essay-file-list\">\n          <div class=\"essay-file-item\">\n            <el-icon><document /></el-icon>\n            <span class=\"essay-file-name\">{{ fileList[0]?.name }}</span>\n            <el-button type=\"primary\" link @click=\"handleFileRemove\">删除</el-button>\n          </div>\n        </div>\n        <el-input\n          v-model=\"form.content_text\"\n          type=\"textarea\"\n          :rows=\"15\"\n          placeholder=\"或直接在此输入作文内容...\"\n          style=\"margin-top: var(--spacing-md)\"\n        />\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, reactive } from 'vue'\nimport { UploadFilled, Document } from '@element-plus/icons-vue'\nimport { ElMessage } from 'element-plus'\nimport type { UploadFile } from 'element-plus'\nimport { extractTextFromFile } from '@/utils/fileParse'\n\nconst emit = defineEmits<{\n  (e: 'update:content', value: string): void\n  (e: 'update:file', value: File | null): void\n}>()\n\nconst form = reactive({\n  title: '',\n  prompt: '',\n  content_text: '',\n})\n\nconst fileList = ref<UploadFile[]>([])\n\nasync function handleFileChange(file: UploadFile) {\n  if (!file.raw) return\n  if (file.raw.size > 1024 * 1024) {\n    ElMessage.error('文件大小不能超过1MB')\n    fileList.value = []\n    return\n  }\n  try {\n    const text = await extractTextFromFile(file.raw)\n    form.content_text = text\n    emit('update:content', text)\n    emit('update:file', file.raw)\n  } catch {\n    ElMessage.error('Word 解析失败，请确认文件格式')\n    fileList.value = []\n  }\n}\n\nfunction handleFileRemove() {\n  fileList.value = []\n  form.content_text = ''\n  emit('update:file', null)\n}\n\ndefineExpose({\n  form,\n  clear: () => {\n    form.title = ''\n    form.prompt = ''\n    form.content_text = ''\n    fileList.value = []\n  },\n})\n</script>\n\n<style scoped>\n.essay-editor {\n  width: 100%;\n}\n\n/* 有文件时不显示上传拖拽区，只显示文件列表 */\n.essay-file-list {\n  border: 1px dashed var(--el-border-color);\n  border-radius: var(--el-border-radius-base);\n  padding: var(--spacing-md, 12px);\n  background: var(--el-fill-color-light);\n}\n\n.essay-file-item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.essay-file-name {\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n/* 小屏时 label 改为 40px */\n@media (max-width: 640px) {\n  .essay-editor :deep(.el-form-item__label) {\n    width: 40px !important;\n  }\n}\n</style>\n","<template>\n  <div class=\"correction-result\">\n    <el-card shadow=\"never\" class=\"stats-card\">\n      <template #header>\n        <h3 class=\"header-font\">语言学统计</h3>\n      </template>\n      <div class=\"stats-grid\">\n        <div class=\"stat-item\">\n          <div class=\"stat-value\">{{ correction.stats.word_count }}</div>\n          <div class=\"stat-label\">字数</div>\n        </div>\n        <div class=\"stat-item\">\n          <div class=\"stat-value\">{{ correction.stats.paragraph_count }}</div>\n          <div class=\"stat-label\">段落数</div>\n        </div>\n        <div class=\"stat-item\">\n          <div class=\"stat-value\">{{ correction.stats.typo_count }}</div>\n          <div class=\"stat-label\">错别字</div>\n        </div>\n        <div class=\"stat-item\" v-if=\"correction.stats.sentence_count\">\n          <div class=\"stat-value\">{{ correction.stats.sentence_count }}</div>\n          <div class=\"stat-label\">句子数</div>\n        </div>\n      </div>\n    </el-card>\n\n    <el-card shadow=\"never\" class=\"summary-card\">\n      <template #header>\n        <h3 class=\"header-font\">评语与建议</h3>\n      </template>\n      <p class=\"summary-text\">{{ correction.summary }}</p>\n    </el-card>\n\n    <el-card shadow=\"never\" class=\"diff-card\">\n      <template #header>\n        <h3 class=\"header-font\">修改痕迹</h3>\n      </template>\n      <div class=\"diff-content\" v-html=\"correction.diff_html\"></div>\n    </el-card>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport type { Correction } from '@/types/essay'\n\ndefineProps<{\n  correction: Correction\n}>()\n</script>\n\n<style scoped>\n.correction-result {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-lg);\n}\n\n.stats-card,\n.summary-card,\n.diff-card {\n  border-radius: var(--border-radius-base);\n  box-shadow: var(--card-shadow);\n  border-color: var(--border-color-lighter);\n}\n\n.stats-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: var(--spacing-md);\n}\n\n.stat-item {\n  text-align: center;\n  padding: var(--spacing-md);\n  background: var(--bg-color-page);\n  border-radius: var(--border-radius-base);\n}\n\n.stat-value {\n  font-size: var(--font-size-xxl);\n  font-weight: 600;\n  color: var(--color-primary);\n  margin-bottom: var(--spacing-xs);\n}\n\n.stat-label {\n  font-size: var(--font-size-sm);\n  color: var(--color-text-secondary);\n}\n\n.summary-text {\n  line-height: 1.8;\n  color: var(--color-text-regular);\n  white-space: pre-wrap;\n}\n\n.diff-content {\n  line-height: 1.8;\n  color: var(--color-text-primary);\n  white-space: pre-wrap;\n}\n\n.diff-content :deep(del) {\n  color: var(--color-danger);\n  text-decoration: line-through;\n  background-color: #fef2f2;\n}\n\n.diff-content :deep(ins) {\n  color: var(--color-success);\n  background-color: #f0fdf4;\n  text-decoration: none;\n}\n</style>\n","<template>\n  <div class=\"correction-page\">\n    <div class=\"container\">\n      <el-card shadow=\"never\">\n        <template #header>\n          <div class=\"page-header\">\n            <h2 class=\"header-font\">作文批改</h2>\n            <div\n              v-if=\"\n                !essayStore.currentEssay ||\n                (essayStore.currentEssay.status !== 'done' &&\n                  essayStore.currentEssay.status !== 'processing')\n              \"\n              class=\"header-actions\"\n            >\n              <el-button v-if=\"authStore.isMember\" @click=\"showDrafts = true\"> 草稿列表 </el-button>\n            </div>\n          </div>\n        </template>\n\n        <div\n          v-if=\"\n            !essayStore.currentEssay ||\n            (essayStore.currentEssay.status !== 'done' &&\n              essayStore.currentEssay.status !== 'processing')\n          \"\n        >\n          <EssayEditor ref=\"editorRef\" />\n          <div class=\"submit-section\">\n            <el-alert\n              v-if=\"!authStore.isAuthenticated\"\n              class=\"tip-alert\"\n              title=\"提示\"\n              type=\"warning\"\n              :closable=\"false\"\n              show-icon\n            >\n              未登录用户无法批改作文，<el-link type=\"primary\" @click=\"$router.push('/login')\">\n                立即登录\n              </el-link>\n            </el-alert>\n            <el-alert\n              v-else-if=\"!authStore.isMember\"\n              class=\"tip-alert draft-tip\"\n              title=\"提示\"\n              type=\"warning\"\n              :closable=\"false\"\n              show-icon\n            >\n              <el-link type=\"primary\" @click=\"$router.push('/profile')\">开通会员</el-link>\n              可保存草稿，可前往\n              <el-link type=\"primary\" @click=\"$router.push('/essay/history')\">历史记录</el-link>\n              查看草稿。\n            </el-alert>\n            <div v-if=\"authStore.isAuthenticated\" class=\"submit-actions\">\n              <el-button\n                type=\"primary\"\n                size=\"large\"\n                :loading=\"essayStore.loading\"\n                @click=\"handleSubmit\"\n              >\n                提交批改\n              </el-button>\n              <el-button\n                v-if=\"authStore.isAuthenticated\"\n                size=\"large\"\n                :disabled=\"!authStore.isMember\"\n                @click=\"handleSaveDraft\"\n              >\n                保存草稿\n              </el-button>\n            </div>\n          </div>\n        </div>\n\n        <div v-else-if=\"essayStore.currentEssay && essayStore.currentEssay.status === 'processing'\">\n          <el-result icon=\"loading\" title=\"正在批改中...\">\n            <template #sub-title>\n              <p>AI正在分析您的作文，请稍候</p>\n            </template>\n          </el-result>\n        </div>\n\n        <div v-else-if=\"essayStore.currentCorrection\">\n          <div class=\"result-header\">\n            <el-button @click=\"handleReset\">重新批改</el-button>\n            <template v-if=\"authStore.isAuthenticated\">\n              <el-button\n                v-if=\"!essayStore.currentEssay?.is_favorited\"\n                type=\"primary\"\n                :loading=\"favoriteLoading\"\n                @click=\"handleFavorite\"\n              >\n                收藏\n              </el-button>\n              <el-button v-else :loading=\"unfavoriteLoading\" @click=\"handleUnfavorite\">\n                取消收藏\n              </el-button>\n            </template>\n          </div>\n          <CorrectionResult :correction=\"essayStore.currentCorrection\" />\n        </div>\n      </el-card>\n    </div>\n\n    <!-- 草稿列表对话框 -->\n    <el-dialog v-model=\"showDrafts\" title=\"草稿列表\" width=\"600px\">\n      <el-table :data=\"essayStore.drafts\" class=\"drafts-table\" style=\"width: 100%\">\n        <el-table-column prop=\"title\" label=\"标题\" />\n        <el-table-column prop=\"updated_at\" label=\"更新时间\" width=\"180\">\n          <template #default=\"{ row }\">\n            {{ new Date(row.updated_at).toLocaleString() }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"140\" align=\"right\">\n          <template #default=\"{ row }\">\n            <div class=\"draft-op-row\">\n              <el-button type=\"primary\" text @click=\"loadDraft(row)\">加载</el-button>\n              <el-button type=\"danger\" text @click=\"deleteDraft(row.id)\">删除</el-button>\n            </div>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div v-if=\"essayStore.drafts.length === 0\" class=\"drafts-empty-state\">\n        <el-empty description=\"暂无草稿\">\n          <el-button type=\"primary\" @click=\"showDrafts = false\">开始编辑</el-button>\n        </el-empty>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted, nextTick, watch } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { useAuthStore } from '@/stores/auth'\nimport { useEssayStore } from '@/stores/essay'\nimport { unfavoriteEssay } from '@/api/essay'\nimport EssayEditor from '@/components/Essay/EssayEditor.vue'\nimport CorrectionResult from '@/components/Essay/CorrectionResult.vue'\nimport { ElMessage, ElMessageBox } from 'element-plus'\n\nconst route = useRoute()\nconst router = useRouter()\nconst authStore = useAuthStore()\nconst essayStore = useEssayStore()\n\nconst editorRef = ref<InstanceType<typeof EssayEditor>>()\nconst showDrafts = ref(false)\n/** 重新批改时暂存作文内容，编辑器挂载后回填 */\nconst pendingEditorContent = ref<{ title: string; prompt: string; content_text: string } | null>(\n  null\n)\n\nasync function loadByRoute() {\n  const essayId = route.params.id as string\n  if (essayId) {\n    await essayStore.fetchEssay(Number(essayId))\n  } else {\n    essayStore.clearCurrent()\n  }\n}\n\nonMounted(async () => {\n  await loadByRoute()\n  if (authStore.isAuthenticated) {\n    await essayStore.fetchDrafts()\n  }\n  const draftId = route.query.draftId as string\n  if (draftId) {\n    nextTick(() => {\n      const draft = essayStore.drafts.find((d) => d.id === Number(draftId))\n      if (draft && editorRef.value) {\n        editorRef.value.form.title = draft.title ?? ''\n        editorRef.value.form.content_text = draft.content_text ?? ''\n      }\n      router.replace({ path: route.path, query: {} })\n    })\n  }\n})\n\n// 同一组件复用：从 /essay/correction 进入 /essay/:id 时需根据 id 拉取批改结果\nwatch(\n  () => route.params.id,\n  async () => {\n    await loadByRoute()\n  }\n)\n\nasync function handleSubmit() {\n  if (!editorRef.value) return\n\n  const { form } = editorRef.value\n  if (!form.content_text.trim()) {\n    ElMessage.warning('请输入作文内容')\n    return\n  }\n\n  try {\n    await essayStore.submitEssay({\n      title: form.title,\n      prompt: form.prompt,\n      content_text: form.content_text,\n      source_type: 'text',\n    })\n\n    // 轮询检查批改结果；fetchEssay 在 status===done 时已拉取完整批改（含 diff_html），勿用 essay.correction 覆盖\n    const checkInterval = window.setInterval(async () => {\n      if (essayStore.currentEssay) {\n        await essayStore.fetchEssay(essayStore.currentEssay.id)\n        if (\n          essayStore.currentEssay.status === 'done' ||\n          essayStore.currentEssay.status === 'failed'\n        ) {\n          window.clearInterval(checkInterval)\n        }\n      }\n    }, 2000)\n\n    // 10秒后停止轮询\n    window.setTimeout(() => window.clearInterval(checkInterval), 10000)\n  } catch (error: unknown) {\n    ElMessage.error((error as Error).message || '提交失败')\n  }\n}\n\nfunction handleReset() {\n  if (essayStore.currentEssay) {\n    pendingEditorContent.value = {\n      title: essayStore.currentEssay.title ?? '',\n      prompt: essayStore.currentEssay.prompt ?? '',\n      content_text: essayStore.currentEssay.content_text ?? '',\n    }\n  }\n  essayStore.clearCurrent()\n  router.push('/essay/correction').then(() => {\n    nextTick(() => {\n      if (editorRef.value && pendingEditorContent.value) {\n        const p = pendingEditorContent.value\n        editorRef.value.form.title = p.title\n        editorRef.value.form.prompt = p.prompt\n        editorRef.value.form.content_text = p.content_text\n        pendingEditorContent.value = null\n      }\n    })\n  })\n}\n\nconst favoriteLoading = ref(false)\nconst unfavoriteLoading = ref(false)\n\nasync function handleFavorite() {\n  if (!essayStore.currentEssay) return\n  favoriteLoading.value = true\n  try {\n    await essayStore.favoriteEssay(essayStore.currentEssay.id)\n    essayStore.setCurrentEssayFavorited(true)\n    ElMessage.success('收藏成功')\n    essayStore.fetchEssay(essayStore.currentEssay.id).catch(() => {})\n  } catch (error: unknown) {\n    ElMessage.error((error as Error).message || '收藏失败')\n  } finally {\n    favoriteLoading.value = false\n  }\n}\n\nasync function handleUnfavorite() {\n  if (!essayStore.currentEssay) return\n  unfavoriteLoading.value = true\n  try {\n    await unfavoriteEssay(essayStore.currentEssay.id)\n    essayStore.setCurrentEssayFavorited(false)\n    ElMessage.success('已取消收藏')\n    essayStore.fetchEssay(essayStore.currentEssay.id).catch(() => {})\n  } catch (error: unknown) {\n    ElMessage.error((error as Error).message || '取消收藏失败')\n  } finally {\n    unfavoriteLoading.value = false\n  }\n}\n\nasync function handleSaveDraft() {\n  if (!editorRef.value) return\n\n  const { form } = editorRef.value\n  if (!form.content_text.trim()) {\n    ElMessage.warning('请输入作文内容')\n    return\n  }\n\n  if (!authStore.isAuthenticated) {\n    ElMessage.warning('请先登录')\n    router.push('/login')\n    return\n  }\n\n  try {\n    await essayStore.createDraft({\n      title: form.title,\n      content_text: form.content_text,\n    })\n    ElMessage.success('草稿已保存')\n  } catch (error: unknown) {\n    ElMessage.error((error as Error).message || '保存失败')\n  }\n}\n\nfunction loadDraft(draft: { title?: string; content_text: string }) {\n  if (editorRef.value) {\n    editorRef.value.form.title = draft.title || ''\n    editorRef.value.form.content_text = draft.content_text\n  }\n  showDrafts.value = false\n}\n\nasync function deleteDraft(id: number) {\n  try {\n    await ElMessageBox.confirm('确定要删除这个草稿吗？', '提示', {\n      type: 'warning',\n    })\n    await essayStore.deleteDraft(id)\n    ElMessage.success('删除成功')\n  } catch (e) {\n    if (e !== 'cancel') {\n      ElMessage.error((e as Error).message || '删除失败')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.correction-page {\n  min-height: calc(100vh - var(--header-height) - 80px);\n  padding: var(--spacing-lg) 0;\n  background: transparent;\n}\n\n.container {\n  max-width: 1000px;\n  margin: 0 auto;\n  padding: 0 var(--spacing-md);\n}\n\n.page-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.page-header h2 {\n  margin: 0;\n  font-size: var(--font-size-xl);\n  font-weight: 600;\n}\n\n.header-actions {\n  display: flex;\n  gap: var(--spacing-sm);\n}\n\n.submit-section {\n  margin-top: var(--spacing-lg);\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-md);\n  align-items: center;\n}\n\n.submit-actions {\n  display: flex;\n  gap: var(--spacing-md);\n  align-items: center;\n}\n\n.draft-tip {\n  width: 100%;\n}\n\n.result-header {\n  display: flex;\n  justify-content: flex-end;\n  gap: var(--spacing-sm);\n  margin-bottom: var(--spacing-lg);\n}\n\n.draft-op-row {\n  display: flex;\n  flex-wrap: nowrap;\n  gap: 4px;\n  justify-content: flex-end;\n}\n\n/* 草稿列表：空状态不显示表格内置「暂无数据」行，由下方自定义空状态展示 */\n.drafts-table :deep(.el-table__empty-block) {\n  display: none;\n}\n\n.drafts-empty-state {\n  padding: var(--spacing-xl) 0;\n}\n</style>\n"],"names":["emit","__emit","form","reactive","fileList","ref","handleFileChange","file","ElMessage","text","extractTextFromFile","handleFileRemove","__expose","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_el_form","_component_el_form_item","_component_el_input","_cache","$event","_component_el_select","_component_el_option","_hoisted_2","_createElementVNode","_hoisted_3","_component_el_icon","_unref","Document","_hoisted_4","_toDisplayString","_component_el_button","_createBlock","_component_el_upload","UploadFilled","_component_el_card","__props","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","route","useRoute","router","useRouter","authStore","useAuthStore","essayStore","useEssayStore","editorRef","showDrafts","pendingEditorContent","loadByRoute","essayId","onMounted","draftId","nextTick","draft","d","watch","handleSubmit","checkInterval","error","handleReset","p","favoriteLoading","unfavoriteLoading","handleFavorite","handleUnfavorite","unfavoriteEssay","handleSaveDraft","loadDraft","deleteDraft","id","ElMessageBox","e","EssayEditor","_component_el_alert","_component_el_link","$router","_component_el_result","_Fragment","CorrectionResult","_component_el_dialog","_component_el_table","_component_el_table_column","_withCtx","row","_createTextVNode","_hoisted_12","_component_el_empty"],"mappings":"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"}