import{d as I,l as o,J as v,C as A,Q as K,a0 as R,c as s,a as c,b as r,e as u,w as h,y as T,r as i,D as l,F as U,x as j,g as E,f as J,a1 as L,o as t,j as M,a2 as $,_ as G}from"./index-BN8HEDSF.js";import{s as H}from"./classic-HeyjI9HZ.js";const O={class:"classic-search-page"},W={class:"search-inner"},X={class:"search-bar"},Y={key:0,class:"result-header"},Z={key:1,class:"loading-wrap"},ee={key:2,class:"empty"},te={key:3,class:"list-wrap"},ae={class:"original content-font"},se={key:0,class:"translation"},oe={class:"meta"},ne={key:0},le={key:1},re={key:2},ce={key:4,class:"pagination-wrap"},y=20,ue=I({name:"ClassicSearch",__name:"Search",setup(ie){const w=A(),d=o(""),C=o(""),_=o([]),g=o(!1),f=o(!1),V=o(!0),q=o(!0),S=o(!0),p=o(1),b=v(()=>w.query.q??""),m=v(()=>_.value.length),N=v(()=>Math.ceil(m.value/y)||1),z=v(()=>{const a=(p.value-1)*y;return _.value.slice(a,a+y)});async function k(){const a=d.value?.trim();if(a){C.value=a,g.value=!0,f.value=!0;try{const n=await H(a,"keyword");_.value=n??[],p.value=1}finally{g.value=!1}}}function x(){const a=b.value;a&&(d.value=a,k())}return K(()=>w.query.q,x),R(()=>{$()?.name!=="ClassicItemDetail"&&x()}),(a,n)=>{const B=i("el-button"),D=i("el-input"),F=i("el-icon"),P=i("router-link"),Q=i("el-pagination");return t(),s("div",O,[c("div",W,[c("div",X,[u(D,{modelValue:d.value,"onUpdate:modelValue":n[0]||(n[0]=e=>d.value=e),placeholder:"输入关键词搜索",size:"large",clearable:"",class:"input",onKeyup:T(k,["enter"])},{append:h(()=>[u(B,{type:"primary",onClick:k},{default:h(()=>[...n[2]||(n[2]=[E("搜索",-1)])]),_:1})]),_:1},8,["modelValue"])]),f.value?(t(),s("div",Y,[c("span",null,"“"+l(C.value)+"” 共 "+l(m.value)+" 条",1)])):r("",!0),g.value?(t(),s("div",Z,[u(F,{class:"is-loading",size:32},{default:h(()=>[u(J(L))]),_:1})])):f.value&&_.value.length===0?(t(),s("div",ee,"暂无结果")):(t(),s("div",te,[(t(!0),s(U,null,j(z.value,e=>(t(),M(P,{key:e.id,to:`/classic/item/${e.id}`,class:"item-card"},{default:h(()=>[c("p",ae,l(e.original_text),1),V.value&&e.translation?(t(),s("p",se,l(e.translation),1)):r("",!0),c("div",oe,[q.value&&e.author?(t(),s("span",ne,l(e.author),1)):r("",!0),S.value&&e.dynasty?(t(),s("span",le,l(e.dynasty),1)):r("",!0),e.source?(t(),s("span",re,l(e.source),1)):r("",!0)])]),_:2},1032,["to"]))),128))])),N.value>1?(t(),s("div",ce,[u(Q,{"current-page":p.value,"onUpdate:currentPage":n[1]||(n[1]=e=>p.value=e),"page-size":y,total:m.value,layout:"prev, pager, next",onCurrentChange:()=>{}},null,8,["current-page","total"])])):r("",!0)])])}}}),pe=G(ue,[["__scopeId","data-v-a590c553"]]);export{pe as default};
//# sourceMappingURL=Search-C9IDViHM.js.map
