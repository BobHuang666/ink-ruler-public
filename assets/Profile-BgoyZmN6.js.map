{"version":3,"file":"Profile-BgoyZmN6.js","sources":["../../src/api/user.ts","../../src/api/feedback.ts","../../src/views/user/Profile.vue"],"sourcesContent":["import request from '@/utils/request'\nimport type { UserDetail, Membership, CheckinResult } from '@/types/user'\n\n// 更新当前用户\nexport async function updateUser(data: {\n  nickname?: string\n  avatar?: string\n  password_old?: string\n  password_new?: string\n  email_code?: string\n}): Promise<UserDetail> {\n  await request.patch('/users/me', data)\n  const res = await request.get<Record<string, unknown>>('/users/me')\n  const d = res.data\n  const membership = d.membership as\n    | { plan: string; expired_at: string; status: string; quota_remaining?: number | null }\n    | undefined\n  return {\n    id: d.id as number,\n    email: d.email as string,\n    phone: d.phone as string | undefined,\n    nickname: (d.nickname as string) || '',\n    avatar: d.avatar as string | undefined,\n    role: d.role as UserDetail['role'],\n    status: d.status as UserDetail['status'],\n    ink_drops: (d.ink_drops as number) ?? 0,\n    created_at: (d.created_at as string) ?? '',\n    updated_at: (d.updated_at as string) ?? '',\n    ...(membership && {\n      membership: {\n        id: 0,\n        user_id: d.id as number,\n        plan: membership.plan as 'student' | 'teacher',\n        started_at: '',\n        expired_at: membership.expired_at,\n        status: membership.status as 'active' | 'expired' | 'cancelled',\n        quota_remaining: membership.quota_remaining ?? undefined,\n        created_at: '',\n        updated_at: '',\n      },\n    }),\n  }\n}\n\n// 获取当前会员信息\nexport async function getMembership(): Promise<Membership | null> {\n  const res = await request.get<Membership | null>('/memberships/me')\n  return res.data\n}\n\n// 签到\nexport async function checkin(): Promise<CheckinResult> {\n  const res = await request.post<CheckinResult>('/users/me/checkin')\n  return res.data\n}\n\n// 墨滴流水项\nexport interface InkDropsLogItem {\n  id: number\n  user_id: number\n  amount: number\n  kind: string\n  created_at: string\n}\n\n// 墨滴流水分页\nexport async function getInkDropsLog(params: {\n  page?: number\n  size?: number\n}): Promise<{ list: InkDropsLogItem[]; total: number }> {\n  const res = await request.get<{ list: InkDropsLogItem[]; total: number }>(\n    '/users/me/ink-drops-log',\n    { params: { page: params.page ?? 1, size: params.size ?? 20 } }\n  )\n  return res.data\n}\n\n// 墨滴兑换（quota_10 | month | year）\nexport async function exchangeByInk(type: 'quota_10' | 'month' | 'year'): Promise<Membership> {\n  const res = await request.post<Membership>('/memberships/exchange-by-ink', { type })\n  return res.data\n}\n\n// 兑换码兑换会员\nexport async function redeemMembership(code: string): Promise<Membership> {\n  const res = await request.post<Membership>('/memberships/redeem', { code })\n  return res.data\n}\n\n// 向当前用户邮箱发送验证码（用于注销等）\nexport async function sendEmailCodeForMe(): Promise<void> {\n  await request.post('/users/me/send-email-code')\n}\n\n// 注销账号（需密码+邮箱验证码）\nexport async function cancelAccount(password: string, emailCode: string): Promise<void> {\n  await request.post('/users/me/cancel', { password, email_code: emailCode })\n}\n","import request from '@/utils/request'\n\n// 提交反馈（可未登录）\nexport async function createFeedback(data: {\n  content: string\n  contact?: string\n}): Promise<{ id: number }> {\n  const res = await request.post<{ id: number }>('/feedbacks', data)\n  return res.data\n}\n","<template>\n  <div class=\"profile-page\">\n    <div class=\"container\">\n      <el-row :gutter=\"20\">\n        <el-col :xs=\"24\" :sm=\"6\">\n          <el-card shadow=\"never\" class=\"profile-card\">\n            <div class=\"avatar-section\">\n              <el-avatar :size=\"88\" :src=\"form.avatar\" class=\"avatar-section__avatar\">\n                {{ form.nickname?.[0] }}\n              </el-avatar>\n              <h3 class=\"avatar-section__name header-font\">{{ form.nickname }}</h3>\n              <p class=\"avatar-section__email\">{{ form.email }}</p>\n              <div class=\"avatar-section__role\">\n                <el-tag v-if=\"authStore.isMember\" type=\"success\" size=\"small\">会员</el-tag>\n                <el-tag v-else type=\"info\" size=\"small\">普通用户</el-tag>\n              </div>\n              <div class=\"avatar-section__meta\">\n                <span class=\"ink-drops\">墨滴：{{ authStore.user?.ink_drops ?? 0 }}</span>\n              </div>\n              <div class=\"avatar-section__actions\">\n                <el-button\n                  :type=\"hasCheckedInToday ? 'default' : 'primary'\"\n                  :plain=\"hasCheckedInToday\"\n                  size=\"default\"\n                  :class=\"[\n                    'avatar-section__checkin-btn',\n                    { 'avatar-section__checkin-btn--done': hasCheckedInToday },\n                  ]\"\n                  @click=\"checkinDialogVisible = true\"\n                >\n                  {{ hasCheckedInToday ? '已签到' : '签到' }}\n                </el-button>\n              </div>\n            </div>\n          </el-card>\n          <el-dialog\n            v-model=\"checkinDialogVisible\"\n            title=\"每日签到\"\n            width=\"400px\"\n            class=\"app-dialog checkin-dialog-wrap\"\n            align-center\n            destroy-on-close\n            @close=\"onCheckinDialogClose\"\n          >\n            <div class=\"checkin-dialog\">\n              <p class=\"checkin-week-tip\">本周累计签到 {{ checkinWeekCount }} 天</p>\n              <div class=\"checkin-ink-block\">\n                <span class=\"checkin-ink-icon\" aria-hidden=\"true\">\n                  <svg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path\n                      d=\"M12 2.5c0 0-5 8-5 13a5 5 0 0 0 10 0c0-5-5-13-5-13z\"\n                      fill=\"currentColor\"\n                    />\n                  </svg>\n                </span>\n                <span class=\"checkin-ink-label\">墨滴：</span>\n                <span class=\"checkin-ink-value\">{{ currentInkDrops }}</span>\n                <el-link type=\"primary\" class=\"checkin-ink-detail\" @click=\"goProfileInkLog\"\n                  >明细 &gt;</el-link\n                >\n              </div>\n\n              <template v-if=\"checkinResult === null\">\n                <div class=\"checkin-grid\">\n                  <div\n                    v-for=\"(reward, i) in checkinDayRewards\"\n                    :key=\"i\"\n                    class=\"checkin-grid-card\"\n                    :class=\"{\n                      'is-current': i === checkinCurrentDayIndex,\n                      'is-signed': i < checkinWeekCount,\n                    }\"\n                  >\n                    <span class=\"checkin-card-day\">{{ i + 1 }}天</span>\n                    <span class=\"checkin-card-star\" aria-hidden=\"true\">\n                      <svg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path\n                          d=\"M12 2.5c0 0-5 8-5 13a5 5 0 0 0 10 0c0-5-5-13-5-13z\"\n                          fill=\"currentColor\"\n                        />\n                      </svg>\n                    </span>\n                    <span class=\"checkin-card-reward\">{{ reward }} 墨滴</span>\n                    <span class=\"checkin-card-vip\">VIP+5</span>\n                    <span v-if=\"i < checkinWeekCount\" class=\"checkin-card-done\">✓</span>\n                  </div>\n                </div>\n                <el-button\n                  v-if=\"hasCheckedInToday\"\n                  class=\"checkin-btn-done checkin-btn-done-inline\"\n                  @click=\"checkinDialogVisible = false\"\n                >\n                  今日已签到\n                </el-button>\n                <el-button\n                  v-else\n                  class=\"checkin-btn-submit\"\n                  :loading=\"checkinLoading\"\n                  @click=\"handleCheckin\"\n                >\n                  立即签到\n                </el-button>\n              </template>\n\n              <template v-else>\n                <div class=\"checkin-result-area\">\n                  <div class=\"checkin-result-star-wrap\">\n                    <span class=\"checkin-result-star\" aria-hidden=\"true\">\n                      <svg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path\n                          d=\"M12 2.5c0 0-5 8-5 13a5 5 0 0 0 10 0c0-5-5-13-5-13z\"\n                          fill=\"currentColor\"\n                        />\n                      </svg>\n                    </span>\n                  </div>\n                  <p class=\"checkin-result-reward\">+{{ checkinResult.reward }} 墨滴</p>\n                  <p class=\"checkin-result-msg\">恭喜获得今日签到奖励！</p>\n                </div>\n                <el-button class=\"checkin-btn-done\" @click=\"checkinDialogVisible = false\"\n                  >今日已签到</el-button\n                >\n              </template>\n            </div>\n          </el-dialog>\n        </el-col>\n        <el-col :xs=\"24\" :sm=\"18\">\n          <el-tabs v-model=\"activeTab\" class=\"profile-tabs\">\n            <el-tab-pane label=\"个人信息\" name=\"info\">\n              <el-card shadow=\"never\">\n                <el-form\n                  :model=\"form\"\n                  :rules=\"rules\"\n                  ref=\"formRef\"\n                  class=\"profile-form\"\n                  label-width=\"100px\"\n                >\n                  <el-form-item label=\"昵称\" prop=\"nickname\">\n                    <el-input v-model=\"form.nickname\" />\n                  </el-form-item>\n                  <el-form-item label=\"邮箱\">\n                    <el-input v-model=\"form.email\" disabled />\n                  </el-form-item>\n                  <el-form-item label=\"手机号\">\n                    <el-input v-model=\"form.phone\" disabled />\n                  </el-form-item>\n                  <el-form-item>\n                    <el-button type=\"primary\" @click=\"handleUpdateInfo\">保存</el-button>\n                  </el-form-item>\n                </el-form>\n              </el-card>\n            </el-tab-pane>\n\n            <el-tab-pane label=\"修改密码\" name=\"password\">\n              <el-card shadow=\"never\">\n                <p v-if=\"passwordMaskedEmail\" class=\"password-email-hint\">\n                  将向您的邮箱 {{ passwordMaskedEmail }} 发送验证码\n                </p>\n                <el-form\n                  :model=\"passwordForm\"\n                  :rules=\"passwordRules\"\n                  ref=\"passwordFormRef\"\n                  class=\"profile-form\"\n                  label-width=\"100px\"\n                >\n                  <el-form-item label=\"验证码\" required>\n                    <div class=\"password-code-row\">\n                      <el-input\n                        v-model=\"passwordForm.email_code\"\n                        placeholder=\"4位验证码\"\n                        maxlength=\"4\"\n                        class=\"password-code-input\"\n                      />\n                      <el-button\n                        type=\"primary\"\n                        :disabled=\"passwordCountdown > 0\"\n                        :loading=\"passwordSendingCode\"\n                        @click=\"handleSendPasswordCode\"\n                      >\n                        {{ passwordCountdown > 0 ? `${passwordCountdown}s 后重试` : '获取验证码' }}\n                      </el-button>\n                    </div>\n                  </el-form-item>\n                  <el-form-item label=\"原密码\" prop=\"oldPassword\">\n                    <el-input v-model=\"passwordForm.oldPassword\" type=\"password\" show-password />\n                  </el-form-item>\n                  <el-form-item label=\"新密码\" prop=\"newPassword\">\n                    <el-input v-model=\"passwordForm.newPassword\" type=\"password\" show-password />\n                  </el-form-item>\n                  <el-form-item label=\"确认密码\" prop=\"confirmPassword\">\n                    <el-input\n                      v-model=\"passwordForm.confirmPassword\"\n                      type=\"password\"\n                      show-password\n                    />\n                  </el-form-item>\n                  <el-form-item>\n                    <el-button type=\"primary\" @click=\"handleUpdatePassword\">修改密码</el-button>\n                  </el-form-item>\n                </el-form>\n              </el-card>\n            </el-tab-pane>\n\n            <el-tab-pane label=\"会员信息\" name=\"membership\">\n              <el-card shadow=\"never\">\n                <div class=\"membership-intro\">\n                  <p>\n                    如需获得更多服务，可使用<span class=\"ink-highlight\">墨滴</span>兑换，或联系\n                    <span\n                      class=\"contact-email\"\n                      role=\"button\"\n                      tabindex=\"0\"\n                      @click=\"copyContactEmail\"\n                      @keydown.enter=\"copyContactEmail\"\n                      >{{ contactEmail }}</span\n                    >\n                    获取兑换码。\n                  </p>\n                </div>\n                <!-- 会员信息：有会员或次数卡时显示标题与内容 -->\n                <template\n                  v-if=\"\n                    (hasTimeMember && membership) ||\n                    (membership && (membership.quota_remaining ?? 0) > 0)\n                  \"\n                >\n                  <h3 class=\"membership-info-title\">会员信息</h3>\n                  <div v-if=\"hasTimeMember && membership\" class=\"membership-info\">\n                    <el-descriptions :column=\"1\" border class=\"membership-descriptions\">\n                      <el-descriptions-item label=\"会员计划\">{{\n                        membership.plan\n                      }}</el-descriptions-item>\n                      <el-descriptions-item label=\"状态\">\n                        <el-tag :type=\"membership.status === 'active' ? 'success' : 'info'\">\n                          {{ membership.status === 'active' ? '有效' : '已过期' }}\n                        </el-tag>\n                      </el-descriptions-item>\n                      <el-descriptions-item label=\"开始时间\">\n                        {{ new Date(membership.started_at).toLocaleDateString() }}\n                      </el-descriptions-item>\n                      <el-descriptions-item label=\"到期时间\">\n                        {{ new Date(membership.expired_at).toLocaleDateString() }}\n                      </el-descriptions-item>\n                      <el-descriptions-item\n                        v-if=\"(membership.quota_remaining ?? 0) > 0\"\n                        label=\"次数卡剩余\"\n                      >\n                        {{ membership.quota_remaining }}\n                      </el-descriptions-item>\n                    </el-descriptions>\n                  </div>\n                  <div\n                    v-else-if=\"membership && (membership.quota_remaining ?? 0) > 0\"\n                    class=\"membership-info\"\n                  >\n                    <el-descriptions :column=\"1\" border class=\"membership-descriptions\">\n                      <el-descriptions-item label=\"次数卡剩余\">\n                        {{ membership.quota_remaining }}\n                      </el-descriptions-item>\n                    </el-descriptions>\n                  </div>\n                </template>\n                <el-empty v-else description=\"您还不是会员\" class=\"membership-empty\" />\n                <div class=\"ink-exchange-section\">\n                  <h3 class=\"ink-exchange-title\">墨滴兑换</h3>\n                  <p class=\"ink-balance\">当前墨滴：{{ authStore.user?.ink_drops ?? 0 }}</p>\n                  <div class=\"ink-exchange-cards\">\n                    <div\n                      v-for=\"item in inkExchangeProducts\"\n                      :key=\"item.type\"\n                      class=\"ink-exchange-card\"\n                    >\n                      <div class=\"ink-card-title\">{{ item.title }}</div>\n                      <p class=\"ink-card-desc\">{{ item.desc }}</p>\n                      <div class=\"ink-card-cost\">\n                        <span class=\"ink-cost-num\">{{ item.cost }}</span>\n                        <span class=\"ink-cost-unit\">墨滴</span>\n                      </div>\n                      <el-button\n                        type=\"primary\"\n                        size=\"default\"\n                        class=\"ink-card-btn\"\n                        :loading=\"exchangeLoading === item.type\"\n                        @click=\"handleExchangeByInk(item.type, item.cost)\"\n                      >\n                        兑换\n                      </el-button>\n                    </div>\n                  </div>\n                  <p v-if=\"(authStore.user?.ink_drops ?? 0) < 900\" class=\"ink-hint\">\n                    墨滴可通过签到获得\n                  </p>\n                </div>\n                <div class=\"membership-redeem\">\n                  <h3 class=\"membership-redeem-title\">兑换码</h3>\n                  <div class=\"redeem-box\">\n                    <el-input\n                      v-model=\"redeemCode\"\n                      placeholder=\"请输入兑换码\"\n                      clearable\n                      maxlength=\"64\"\n                      class=\"redeem-input\"\n                    />\n                    <el-button\n                      type=\"primary\"\n                      :loading=\"redeemLoading\"\n                      :disabled=\"!redeemCode.trim()\"\n                      @click=\"handleRedeemCode\"\n                    >\n                      兑换\n                    </el-button>\n                  </div>\n                </div>\n              </el-card>\n            </el-tab-pane>\n\n            <el-tab-pane label=\"墨滴明细\" name=\"inkLog\">\n              <el-card shadow=\"never\">\n                <div class=\"ink-log-section\">\n                  <p class=\"ink-balance\">当前墨滴：{{ authStore.user?.ink_drops ?? 0 }}</p>\n                  <el-table\n                    v-loading=\"inkLogLoading\"\n                    :data=\"inkLogList\"\n                    class=\"profile-table\"\n                    style=\"width: 100%\"\n                  >\n                    <el-table-column prop=\"kind_label\" label=\"类型\" min-width=\"100\" />\n                    <el-table-column prop=\"amount\" label=\"变动\" min-width=\"80\">\n                      <template #default=\"{ row }\">\n                        <span :class=\"row.amount >= 0 ? 'ink-plus' : 'ink-minus'\">\n                          {{ row.amount >= 0 ? '+' : '' }}{{ row.amount }}\n                        </span>\n                      </template>\n                    </el-table-column>\n                    <el-table-column prop=\"created_at\" label=\"时间\" min-width=\"160\">\n                      <template #default=\"{ row }\">\n                        {{ new Date(row.created_at).toLocaleString() }}\n                      </template>\n                    </el-table-column>\n                  </el-table>\n                  <el-pagination\n                    v-if=\"inkLogTotal > inkLogPageSize\"\n                    class=\"ink-log-pagination\"\n                    layout=\"prev, pager, next\"\n                    :current-page=\"inkLogPage\"\n                    :page-size=\"inkLogPageSize\"\n                    :total=\"inkLogTotal\"\n                    @current-change=\"onInkLogPageChange\"\n                  />\n                </div>\n              </el-card>\n            </el-tab-pane>\n\n            <el-tab-pane label=\"作文收藏\" name=\"favorites\">\n              <el-card shadow=\"never\">\n                <div v-if=\"favorites.length || favoritesLoading\" class=\"table-scroll-wrap\">\n                  <el-table\n                    v-loading=\"favoritesLoading\"\n                    :data=\"favorites\"\n                    class=\"profile-table\"\n                    style=\"width: 100%\"\n                  >\n                    <el-table-column prop=\"title\" label=\"标题\" min-width=\"120\">\n                      <template #default=\"{ row }\">\n                        <router-link :to=\"`/essay/${row.essay_id}`\" class=\"table-link\">\n                          {{ row.title || '无标题' }}\n                        </router-link>\n                      </template>\n                    </el-table-column>\n                    <el-table-column label=\"收藏时间\" min-width=\"150\">\n                      <template #default=\"{ row }\">\n                        {{ new Date(row.essay_created_at).toLocaleString() }}\n                      </template>\n                    </el-table-column>\n                    <el-table-column label=\"操作\" min-width=\"100\" align=\"right\">\n                      <template #default=\"{ row }\">\n                        <el-button\n                          type=\"danger\"\n                          text\n                          :loading=\"unfavoriteId === row.essay_id\"\n                          @click=\"handleUnfavorite(row)\"\n                        >\n                          取消收藏\n                        </el-button>\n                      </template>\n                    </el-table-column>\n                  </el-table>\n                </div>\n                <el-empty v-else description=\"暂无作文收藏\">\n                  <el-button type=\"primary\" @click=\"$router.push('/essay/history')\"\n                    >去历史记录</el-button\n                  >\n                </el-empty>\n              </el-card>\n            </el-tab-pane>\n\n            <el-tab-pane label=\"素材收藏\" name=\"classicFavorites\">\n              <el-card shadow=\"never\">\n                <div\n                  v-if=\"classicFavorites.length || classicFavoritesLoading\"\n                  class=\"table-scroll-wrap\"\n                >\n                  <el-table\n                    v-loading=\"classicFavoritesLoading\"\n                    :data=\"classicFavorites\"\n                    class=\"profile-table\"\n                    style=\"width: 100%\"\n                  >\n                    <el-table-column label=\"内容\" min-width=\"180\">\n                      <template #default=\"{ row }\">\n                        <router-link :to=\"`/classic/item/${row.id}`\" class=\"table-link\">\n                          {{ row.original_text?.slice(0, 50)\n                          }}{{ (row.original_text?.length ?? 0) > 50 ? '…' : '' }}\n                        </router-link>\n                      </template>\n                    </el-table-column>\n                    <el-table-column label=\"作者/朝代\" min-width=\"100\">\n                      <template #default=\"{ row }\"> {{ row.author }} {{ row.dynasty }} </template>\n                    </el-table-column>\n                    <el-table-column label=\"操作\" min-width=\"100\" align=\"right\">\n                      <template #default=\"{ row }\">\n                        <el-button\n                          type=\"danger\"\n                          text\n                          :loading=\"unfavoriteClassicId === row.id\"\n                          @click=\"handleUnfavoriteClassic(row)\"\n                        >\n                          取消收藏\n                        </el-button>\n                      </template>\n                    </el-table-column>\n                  </el-table>\n                </div>\n                <el-empty v-else description=\"暂无素材收藏\">\n                  <el-button type=\"primary\" @click=\"$router.push('/classic')\">去素材中心</el-button>\n                </el-empty>\n              </el-card>\n            </el-tab-pane>\n\n            <el-tab-pane label=\"反馈建议\" name=\"feedback\">\n              <el-card shadow=\"never\">\n                <el-form :model=\"feedbackForm\" class=\"profile-form\" label-width=\"100px\">\n                  <el-form-item label=\"反馈内容\">\n                    <el-input\n                      v-model=\"feedbackForm.content\"\n                      type=\"textarea\"\n                      :rows=\"6\"\n                      placeholder=\"请输入您的反馈或建议...\"\n                    />\n                  </el-form-item>\n                  <el-form-item label=\"联系方式\">\n                    <el-input v-model=\"feedbackForm.contact\" placeholder=\"邮箱或手机号（可选）\" />\n                  </el-form-item>\n                  <el-form-item>\n                    <el-button type=\"primary\" @click=\"handleSubmitFeedback\">提交反馈</el-button>\n                  </el-form-item>\n                </el-form>\n              </el-card>\n            </el-tab-pane>\n\n            <el-tab-pane label=\"账号安全\" name=\"security\">\n              <el-card shadow=\"never\">\n                <div class=\"security-section\">\n                  <h4>注销账号</h4>\n                  <p class=\"security-desc\">注销后账号及关联数据将被删除且无法恢复，请谨慎操作。</p>\n                  <el-button type=\"danger\" plain @click=\"openCancelDialog\">申请注销账号</el-button>\n                </div>\n              </el-card>\n              <el-dialog\n                v-model=\"cancelDialogVisible\"\n                title=\"注销账号\"\n                width=\"400px\"\n                class=\"cancel-account-dialog app-dialog\"\n                :close-on-click-modal=\"false\"\n                @closed=\"onCancelDialogClosed\"\n              >\n                <el-alert\n                  class=\"tip-alert cancel-dialog-tip\"\n                  title=\"提示\"\n                  type=\"warning\"\n                  :closable=\"false\"\n                  show-icon\n                >\n                  注销后账号及关联数据将被删除且无法恢复，请谨慎操作。\n                </el-alert>\n                <p v-if=\"cancelMaskedEmail\" class=\"cancel-email-hint\">\n                  将向您的邮箱 {{ cancelMaskedEmail }} 发送验证码\n                </p>\n                <el-form\n                  :model=\"cancelForm\"\n                  label-width=\"80px\"\n                  @submit.prevent=\"handleCancelAccount\"\n                >\n                  <el-form-item label=\"验证码\" required>\n                    <div class=\"cancel-code-row\">\n                      <el-input\n                        v-model=\"cancelForm.email_code\"\n                        placeholder=\"4位验证码\"\n                        maxlength=\"4\"\n                        show-word-limit\n                        class=\"cancel-code-input\"\n                      />\n                      <el-button\n                        type=\"primary\"\n                        :disabled=\"cancelCountdown > 0\"\n                        :loading=\"cancelSendingCode\"\n                        @click=\"handleSendCancelCode\"\n                      >\n                        {{ cancelCountdown > 0 ? `${cancelCountdown}s 后重试` : '获取验证码' }}\n                      </el-button>\n                    </div>\n                  </el-form-item>\n                  <el-form-item label=\"当前密码\" required>\n                    <el-input\n                      v-model=\"cancelForm.password\"\n                      type=\"password\"\n                      show-password\n                      placeholder=\"请输入当前密码以确认\"\n                      @keyup.enter=\"handleCancelAccount\"\n                    />\n                  </el-form-item>\n                </el-form>\n                <template #footer>\n                  <el-button @click=\"cancelDialogVisible = false\">取消</el-button>\n                  <el-button type=\"danger\" :loading=\"cancelLoading\" @click=\"handleCancelAccount\">\n                    确认注销\n                  </el-button>\n                </template>\n              </el-dialog>\n            </el-tab-pane>\n          </el-tabs>\n        </el-col>\n      </el-row>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, reactive, onMounted, watch, onUnmounted, computed } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { useAuthStore } from '@/stores/auth'\nimport { maskEmail } from '@/utils/format'\nimport * as userApi from '@/api/user'\nimport * as feedbackApi from '@/api/feedback'\nimport * as essayApi from '@/api/essay'\nimport * as classicApi from '@/api/classic'\nimport { ElMessage, ElMessageBox, type FormInstance, type FormRules } from 'element-plus'\nimport type { Membership, CheckinResult } from '@/types/user'\nimport type { InkDropsLogItem } from '@/api/user'\nimport type { FavoriteItem } from '@/types/essay'\nimport type { ClassicItem } from '@/types/classic'\n\nconst router = useRouter()\nconst route = useRoute()\nconst authStore = useAuthStore()\n\nconst activeTab = ref('info')\nconst formRef = ref<FormInstance>()\nconst passwordFormRef = ref<FormInstance>()\nconst membership = ref<Membership | null>(null)\nconst redeemCode = ref('')\nconst redeemLoading = ref(false)\nconst exchangeLoading = ref<'' | 'quota_10' | 'month' | 'year'>('')\n\nconst contactEmail = 'inkruler@163.com'\nconst inkExchangeProducts: {\n  type: 'quota_10' | 'month' | 'year'\n  title: string\n  desc: string\n  cost: number\n}[] = [\n  { type: 'quota_10', title: '10 次次卡', desc: '可批改 10 篇作文，不限期使用', cost: 900 },\n  { type: 'month', title: '1 个月会员', desc: '30 天内无限次批改', cost: 1500 },\n  { type: 'year', title: '1 年会员', desc: '一年内无限次批改，更划算', cost: 15000 },\n]\n\nasync function copyContactEmail() {\n  try {\n    await window.navigator.clipboard.writeText(contactEmail)\n    ElMessage.success('已复制到剪贴板')\n  } catch {\n    ElMessage.error('复制失败')\n  }\n}\n\nconst form = reactive({\n  nickname: '',\n  email: '',\n  phone: '',\n  avatar: '',\n})\n\nconst passwordForm = reactive({\n  email_code: '',\n  oldPassword: '',\n  newPassword: '',\n  confirmPassword: '',\n})\n\nconst passwordMaskedEmail = computed(() =>\n  authStore.user?.email ? maskEmail(authStore.user.email) : ''\n)\nconst cancelMaskedEmail = computed(() =>\n  authStore.user?.email ? maskEmail(authStore.user.email) : ''\n)\n// 时间型会员：有开始/到期时间（次数型不算会员，不显示状态与日期）\nconst hasTimeMember = computed(\n  () =>\n    !!(\n      membership.value?.started_at &&\n      membership.value?.expired_at &&\n      !String(membership.value.expired_at).startsWith('0001')\n    )\n)\n\nconst passwordSendingCode = ref(false)\nconst passwordCountdown = ref(0)\nlet passwordCountdownTimer: ReturnType<typeof setInterval> | null = null\n\nconst feedbackForm = reactive({\n  content: '',\n  contact: '',\n})\n\nconst cancelDialogVisible = ref(false)\nconst cancelLoading = ref(false)\nconst cancelSendingCode = ref(false)\nconst cancelCountdown = ref(0)\nlet cancelCountdownTimer: ReturnType<typeof setInterval> | null = null\nconst cancelForm = reactive({ password: '', email_code: '' })\n\nconst checkinDialogVisible = ref(false)\nconst checkinResult = ref<CheckinResult | null>(null)\nconst checkinLoading = ref(false)\n/** 用于弹窗关闭后再次打开时显示「本周累计签到 X 天」 */\nconst lastCheckinWeekCount = ref(0)\n/** 本会话内今日已签到（用于左侧按钮显示「已签到」浅色） */\nconst hasCheckedInToday = ref(false)\n\nconst checkinDayRewards = [10, 10, 10, 10, 10, 20, 20]\nconst checkinWeekCount = computed(() =>\n  checkinResult.value ? checkinResult.value.week_count : lastCheckinWeekCount.value\n)\n/** 高亮格子：已签到时为「今天」（已签那天），未签到时为「待签那天」 */\nconst checkinCurrentDayIndex = computed(() =>\n  hasCheckedInToday.value ? Math.max(0, lastCheckinWeekCount.value - 1) : lastCheckinWeekCount.value\n)\nconst currentInkDrops = computed(\n  () => checkinResult.value?.ink_drops ?? authStore.user?.ink_drops ?? 0\n)\n\nfunction goProfileInkLog() {\n  checkinDialogVisible.value = false\n  activeTab.value = 'inkLog'\n  router.replace({ path: '/profile', query: { tab: 'inkLog' } })\n}\n\nfunction onCheckinDialogClose() {\n  if (checkinResult.value) {\n    lastCheckinWeekCount.value = checkinResult.value.week_count\n    if (checkinResult.value.already_signed) hasCheckedInToday.value = true\n  }\n  checkinResult.value = null\n}\n\nconst inkLogList = ref<(InkDropsLogItem & { kind_label: string })[]>([])\nconst inkLogLoading = ref(false)\nconst inkLogPage = ref(1)\nconst inkLogPageSize = 20\nconst inkLogTotal = ref(0)\nconst kindLabels: Record<string, string> = {\n  register_gift: '注册赠送',\n  checkin: '签到',\n  correct: '批改消耗',\n  exchange_quota_10: '兑换10次卡',\n  exchange_month: '兑换月会员',\n  exchange_year: '兑换年会员',\n  admin_grant: '管理员增加',\n}\n\nconst favorites = ref<FavoriteItem[]>([])\nconst favoritesLoading = ref(false)\nconst unfavoriteId = ref<number | null>(null)\nconst classicFavorites = ref<ClassicItem[]>([])\nconst classicFavoritesLoading = ref(false)\nconst unfavoriteClassicId = ref<number | null>(null)\n\nconst rules: FormRules = {\n  nickname: [\n    { required: true, message: '请输入昵称', trigger: 'blur' },\n    { min: 2, max: 20, message: '昵称长度在2到20个字符', trigger: 'blur' },\n  ],\n}\n\nconst validateConfirmPassword = (\n  _rule: unknown,\n  value: string,\n  callback: (error?: Error) => void\n) => {\n  if (value !== passwordForm.newPassword) {\n    callback(new Error('两次输入的密码不一致'))\n  } else {\n    callback()\n  }\n}\n\nconst passwordRules: FormRules = {\n  oldPassword: [{ required: true, message: '请输入原密码', trigger: 'blur' }],\n  newPassword: [\n    { required: true, message: '请输入新密码', trigger: 'blur' },\n    { min: 6, message: '密码长度不能少于6位', trigger: 'blur' },\n  ],\n  confirmPassword: [\n    { required: true, message: '请确认密码', trigger: 'blur' },\n    { validator: validateConfirmPassword, trigger: 'blur' },\n  ],\n}\n\nasync function handleSendPasswordCode() {\n  if (passwordCountdown.value > 0) return\n  passwordSendingCode.value = true\n  try {\n    await userApi.sendEmailCodeForMe()\n    ElMessage.success(`验证码已发送至 ${passwordMaskedEmail.value}，请查收`)\n    passwordCountdown.value = 60\n    passwordCountdownTimer = setInterval(() => {\n      passwordCountdown.value--\n      if (passwordCountdown.value <= 0 && passwordCountdownTimer) {\n        clearInterval(passwordCountdownTimer)\n        passwordCountdownTimer = null\n      }\n    }, 1000)\n  } catch (error: unknown) {\n    ElMessage.error((error as Error).message || '发送失败')\n  } finally {\n    passwordSendingCode.value = false\n  }\n}\n\nonMounted(async () => {\n  const tab = route.query.tab as string\n  if (\n    tab &&\n    [\n      'membership',\n      'inkLog',\n      'info',\n      'password',\n      'favorites',\n      'classicFavorites',\n      'feedback',\n      'security',\n    ].includes(tab)\n  ) {\n    activeTab.value = tab\n  }\n  if (authStore.user) {\n    form.nickname = authStore.user.nickname\n    form.email = authStore.user.email || ''\n    form.phone = authStore.user.phone || ''\n    form.avatar = authStore.user.avatar || ''\n  }\n  await fetchMembership()\n})\n\n// 签到状态以接口为准：用户信息更新时同步\nwatch(\n  () => authStore.user,\n  (u) => {\n    if (u) {\n      lastCheckinWeekCount.value = u.checkin_week_count ?? 0\n      hasCheckedInToday.value = u.checkin_today_done ?? false\n    }\n  },\n  { immediate: true }\n)\n\nwatch(activeTab, (tab) => {\n  if (tab === 'favorites') fetchFavorites()\n  if (tab === 'classicFavorites') fetchClassicFavorites()\n  if (tab === 'inkLog') fetchInkDropsLog()\n})\n\nasync function fetchFavorites() {\n  favoritesLoading.value = true\n  try {\n    favorites.value = await essayApi.getFavorites()\n  } catch {\n    favorites.value = []\n  } finally {\n    favoritesLoading.value = false\n  }\n}\n\nasync function handleUnfavorite(item: FavoriteItem) {\n  unfavoriteId.value = item.essay_id\n  try {\n    await essayApi.unfavoriteEssay(item.essay_id)\n    favorites.value = favorites.value.filter((f) => f.essay_id !== item.essay_id)\n    ElMessage.success('已取消收藏')\n  } catch (error: unknown) {\n    ElMessage.error((error as Error).message || '取消收藏失败')\n  } finally {\n    unfavoriteId.value = null\n  }\n}\n\nasync function fetchClassicFavorites() {\n  classicFavoritesLoading.value = true\n  try {\n    classicFavorites.value = await classicApi.getClassicFavorites()\n  } catch {\n    classicFavorites.value = []\n  } finally {\n    classicFavoritesLoading.value = false\n  }\n}\n\nasync function handleUnfavoriteClassic(c: ClassicItem) {\n  unfavoriteClassicId.value = c.id\n  try {\n    await classicApi.unfavorite(c.id)\n    classicFavorites.value = classicFavorites.value.filter((x) => x.id !== c.id)\n    ElMessage.success('已取消收藏')\n  } catch (error: unknown) {\n    ElMessage.error((error as Error).message || '取消收藏失败')\n  } finally {\n    unfavoriteClassicId.value = null\n  }\n}\n\nasync function fetchMembership() {\n  try {\n    membership.value = await userApi.getMembership()\n  } catch {\n    // 忽略错误\n  }\n}\n\nasync function handleUpdateInfo() {\n  if (!formRef.value) return\n  await formRef.value.validate(async (valid) => {\n    if (valid) {\n      try {\n        await userApi.updateUser({ nickname: form.nickname })\n        await authStore.fetchUser()\n        ElMessage.success('更新成功')\n      } catch (error: unknown) {\n        ElMessage.error((error as Error).message || '更新失败')\n      }\n    }\n  })\n}\n\nasync function handleUpdatePassword() {\n  if (!passwordFormRef.value) return\n  if (!passwordForm.email_code.trim() || passwordForm.email_code.length !== 4) {\n    ElMessage.warning('请输入4位验证码')\n    return\n  }\n  await passwordFormRef.value.validate(async (valid) => {\n    if (valid) {\n      try {\n        await userApi.updateUser({\n          password_old: passwordForm.oldPassword,\n          password_new: passwordForm.newPassword,\n          email_code: passwordForm.email_code,\n        })\n        ElMessage.success('密码修改成功')\n        passwordForm.email_code = ''\n        passwordForm.oldPassword = ''\n        passwordForm.newPassword = ''\n        passwordForm.confirmPassword = ''\n      } catch (error: unknown) {\n        ElMessage.error((error as Error).message || '密码修改失败')\n      }\n    }\n  })\n}\n\nasync function handleRedeemCode() {\n  const code = redeemCode.value.trim()\n  if (!code) return\n  redeemLoading.value = true\n  try {\n    await userApi.redeemMembership(code)\n    await authStore.fetchUser()\n    // 重新拉取会员信息，使时间型会员与次数卡合并展示，无需刷新页面\n    membership.value = await userApi.getMembership()\n    redeemCode.value = ''\n    ElMessage.success('兑换成功')\n  } catch (error: unknown) {\n    ElMessage.error((error as Error).message || '兑换失败')\n  } finally {\n    redeemLoading.value = false\n  }\n}\n\nasync function handleExchangeByInk(type: 'quota_10' | 'month' | 'year', cost: number) {\n  const ink = authStore.user?.ink_drops ?? 0\n  if (ink < cost) {\n    const msgHtml = `墨滴不足，可联系 <span class=\"app-dialog-email\" data-email=\"${contactEmail}\">${contactEmail}</span> 获取更多服务`\n    const p = ElMessageBox.alert(msgHtml, '提示', {\n      confirmButtonText: '确定',\n      customClass: 'app-dialog',\n      dangerouslyUseHTMLString: true,\n    })\n    setTimeout(() => {\n      document.querySelectorAll('.app-dialog-email').forEach((el) => {\n        el.addEventListener('click', () => {\n          window.navigator.clipboard.writeText(contactEmail).then(\n            () => ElMessage.success('已复制到剪贴板'),\n            () => ElMessage.error('复制失败')\n          )\n        })\n      })\n    }, 50)\n    await p\n    return\n  }\n  exchangeLoading.value = type\n  try {\n    await userApi.exchangeByInk(type)\n    await authStore.fetchUser()\n    membership.value = await userApi.getMembership()\n    ElMessage.success('兑换成功')\n  } catch (error: unknown) {\n    ElMessage.error((error as Error).message || '兑换失败')\n  } finally {\n    exchangeLoading.value = ''\n  }\n}\n\nasync function fetchInkDropsLog() {\n  inkLogLoading.value = true\n  try {\n    const res = await userApi.getInkDropsLog({\n      page: inkLogPage.value,\n      size: inkLogPageSize,\n    })\n    inkLogTotal.value = res.total\n    inkLogList.value = (res.list || []).map((item) => ({\n      ...item,\n      kind_label: kindLabels[item.kind] || item.kind,\n    }))\n  } catch {\n    inkLogList.value = []\n  } finally {\n    inkLogLoading.value = false\n  }\n}\n\nfunction onInkLogPageChange(p: number) {\n  inkLogPage.value = p\n  fetchInkDropsLog()\n}\n\nasync function handleCheckin() {\n  checkinLoading.value = true\n  try {\n    const result = await userApi.checkin()\n    const weekCount = Number(result?.week_count ?? 0)\n    checkinResult.value = { ...result, week_count: weekCount }\n    lastCheckinWeekCount.value = weekCount\n    hasCheckedInToday.value = true\n    await authStore.fetchUser()\n    if (!result.already_signed) {\n      ElMessage.success(`签到成功，获得 ${result.reward} 墨滴`)\n    }\n  } catch (error: unknown) {\n    ElMessage.error((error as Error).message || '签到失败')\n  } finally {\n    checkinLoading.value = false\n  }\n}\n\nasync function handleSubmitFeedback() {\n  if (!feedbackForm.content.trim()) {\n    ElMessage.warning('请输入反馈内容')\n    return\n  }\n  try {\n    await feedbackApi.createFeedback({\n      content: feedbackForm.content.trim(),\n      contact: feedbackForm.contact.trim() || undefined,\n    })\n    ElMessage.success('反馈提交成功，感谢您的建议！')\n    feedbackForm.content = ''\n    feedbackForm.contact = ''\n  } catch (error: unknown) {\n    ElMessage.error((error as Error).message || '提交失败')\n  }\n}\n\nfunction onCancelDialogClosed() {\n  cancelForm.password = ''\n  cancelForm.email_code = ''\n}\n\nfunction openCancelDialog() {\n  cancelForm.password = ''\n  cancelForm.email_code = ''\n  cancelDialogVisible.value = true\n}\n\nasync function handleSendCancelCode() {\n  if (cancelCountdown.value > 0) return\n  cancelSendingCode.value = true\n  try {\n    await userApi.sendEmailCodeForMe()\n    ElMessage.success(`验证码已发送至 ${cancelMaskedEmail.value}，请查收`)\n    cancelCountdown.value = 60\n    cancelCountdownTimer = setInterval(() => {\n      cancelCountdown.value--\n      if (cancelCountdown.value <= 0 && cancelCountdownTimer) {\n        clearInterval(cancelCountdownTimer)\n        cancelCountdownTimer = null\n      }\n    }, 1000)\n  } catch (error: unknown) {\n    ElMessage.error((error as Error).message || '发送失败')\n  } finally {\n    cancelSendingCode.value = false\n  }\n}\n\nonUnmounted(() => {\n  if (cancelCountdownTimer) clearInterval(cancelCountdownTimer)\n  if (passwordCountdownTimer) clearInterval(passwordCountdownTimer)\n})\n\nasync function handleCancelAccount() {\n  if (!cancelForm.password.trim()) {\n    ElMessage.warning('请输入当前密码')\n    return\n  }\n  if (!cancelForm.email_code.trim() || cancelForm.email_code.length !== 4) {\n    ElMessage.warning('请输入4位验证码')\n    return\n  }\n  cancelLoading.value = true\n  try {\n    await userApi.cancelAccount(cancelForm.password, cancelForm.email_code)\n    authStore.clearLocal()\n    cancelDialogVisible.value = false\n    ElMessage.success('账号已注销')\n    router.replace('/')\n  } catch (error: unknown) {\n    ElMessage.error((error as Error).message || '注销失败')\n  } finally {\n    cancelLoading.value = false\n  }\n}\n</script>\n\n<style scoped>\n.profile-page {\n  min-height: calc(100vh - var(--header-height) - 80px);\n  padding: var(--spacing-lg) 0;\n  background: transparent;\n}\n\n.container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 var(--spacing-md);\n}\n\n/* 标签栏仅支持横向滑动，无箭头、无滚动条 */\n.profile-tabs :deep(.el-tabs__nav-prev),\n.profile-tabs :deep(.el-tabs__nav-next) {\n  display: none;\n}\n.profile-tabs :deep(.el-tabs__nav-scroll) {\n  overflow-x: auto;\n  overflow-y: hidden;\n  -webkit-overflow-scrolling: touch;\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n}\n.profile-tabs :deep(.el-tabs__nav-scroll)::-webkit-scrollbar {\n  display: none;\n}\n.profile-tabs :deep(.el-tabs__nav) {\n  flex-wrap: nowrap;\n  min-width: min-content;\n}\n.profile-tabs :deep(.el-tabs__item) {\n  white-space: nowrap;\n}\n.profile-tabs :deep(.el-tabs__header) {\n  margin-bottom: var(--spacing-md);\n}\n\n.profile-card {\n  text-align: center;\n}\n\n.avatar-section {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--spacing-sm);\n  padding: var(--spacing-lg) var(--spacing-md);\n}\n\n.avatar-section__avatar {\n  flex-shrink: 0;\n}\n\n.avatar-section__name {\n  margin: 0;\n  font-size: var(--font-size-lg);\n  font-weight: 600;\n  line-height: 1.3;\n  word-break: break-all;\n}\n\n.avatar-section__email {\n  margin: 0;\n  color: var(--color-text-secondary);\n  font-size: var(--font-size-sm);\n  line-height: 1.4;\n  word-break: break-all;\n  max-width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.avatar-section__meta {\n  margin: 0;\n}\n\n.avatar-section .ink-drops {\n  font-size: var(--font-size-sm);\n  color: var(--color-text-regular);\n}\n\n.avatar-section__actions {\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  justify-content: center;\n  gap: var(--spacing-sm);\n  margin-top: var(--spacing-xs);\n}\n\n.avatar-section__checkin-btn {\n  min-width: 96px;\n  font-weight: 600;\n}\n.avatar-section__checkin-btn--done {\n  color: var(--color-primary);\n  border-color: rgba(217, 119, 6, 0.45);\n  background: rgba(217, 119, 6, 0.1);\n}\n.avatar-section__checkin-btn--done:hover {\n  color: var(--color-primary);\n  border-color: rgba(217, 119, 6, 0.45);\n  background: rgba(217, 119, 6, 0.16);\n}\n\n/* 每日签到弹窗（参考样式） */\n.checkin-dialog-wrap .el-dialog__body {\n  padding: 0 var(--spacing-md) var(--spacing-lg);\n}\n\n.checkin-dialog {\n  padding-top: var(--spacing-xs);\n}\n\n.checkin-week-tip {\n  margin: var(--spacing-md) 0 var(--spacing-sm);\n  padding: 0 var(--spacing-xs);\n  font-size: var(--font-size-sm);\n  color: var(--color-text-secondary);\n}\n\n.checkin-ink-block {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-xs);\n  padding: var(--spacing-sm) var(--spacing-md);\n  margin-bottom: var(--spacing-md);\n  background: var(--border-color-extra-light);\n  border-radius: var(--border-radius-base);\n  box-shadow: var(--box-shadow-light);\n}\n\n.checkin-ink-icon {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--color-primary);\n  width: 20px;\n  height: 20px;\n  flex-shrink: 0;\n}\n.checkin-ink-icon svg {\n  width: 100%;\n  height: 100%;\n}\n\n.checkin-ink-label {\n  font-size: var(--font-size-sm);\n  color: var(--color-text-regular);\n}\n\n.checkin-ink-value {\n  flex: 1;\n  font-size: 20px;\n  font-weight: 700;\n  color: var(--color-primary);\n}\n\n.checkin-ink-detail {\n  font-size: var(--font-size-sm);\n}\n\n.checkin-grid {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: var(--spacing-sm);\n  margin-bottom: var(--spacing-lg);\n}\n\n.checkin-grid-card {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 2px;\n  padding: var(--spacing-sm);\n  background: var(--bg-color);\n  border: 1px solid var(--border-color-lighter);\n  border-radius: var(--border-radius-small);\n  font-size: var(--font-size-xs);\n  color: var(--color-text-regular);\n}\n\n.checkin-grid-card .checkin-card-day {\n  font-weight: 500;\n}\n\n.checkin-grid-card .checkin-card-star {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--color-primary);\n  width: 18px;\n  height: 18px;\n}\n.checkin-grid-card .checkin-card-star svg {\n  width: 100%;\n  height: 100%;\n}\n\n.checkin-grid-card .checkin-card-reward {\n  font-size: 11px;\n}\n\n.checkin-grid-card .checkin-card-vip {\n  font-size: 10px;\n  color: var(--color-text-secondary);\n}\n\n.checkin-grid-card.is-current .checkin-card-vip {\n  color: rgba(255, 255, 255, 0.9);\n}\n\n.checkin-grid-card.is-current {\n  background: linear-gradient(135deg, #fed7aa 0%, #fdba74 100%);\n  border-color: var(--color-primary);\n  color: #fff;\n}\n\n.checkin-grid-card.is-current .checkin-card-star {\n  color: #fff;\n}\n\n.checkin-grid-card.is-signed:not(.is-current) .checkin-card-done {\n  position: absolute;\n  top: 2px;\n  right: 4px;\n  color: var(--color-success);\n  font-size: 12px;\n  font-weight: bold;\n}\n\n.checkin-btn-submit {\n  width: 100%;\n  height: 44px;\n  font-weight: 600;\n  font-size: var(--font-size-base);\n  color: #fff;\n  border: none;\n  border-radius: 22px;\n  background: linear-gradient(90deg, var(--color-primary) 0%, var(--color-primary-light) 100%);\n}\n\n.checkin-btn-submit:hover {\n  opacity: 0.9;\n  color: #fff;\n}\n\n.checkin-result-area {\n  text-align: center;\n  margin-bottom: var(--spacing-lg);\n}\n\n.checkin-result-star-wrap {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 64px;\n  height: 64px;\n  margin-bottom: var(--spacing-sm);\n  background: rgba(217, 119, 6, 0.12);\n  border-radius: 50%;\n}\n\n.checkin-result-star {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  color: var(--color-primary);\n}\n.checkin-result-star svg {\n  width: 100%;\n  height: 100%;\n}\n\n.checkin-result-reward {\n  margin: 0 0 var(--spacing-xs);\n  font-size: 24px;\n  font-weight: 700;\n  color: var(--color-primary);\n}\n\n.checkin-result-msg {\n  margin: 0;\n  font-size: var(--font-size-sm);\n  color: var(--color-text-regular);\n}\n\n.checkin-btn-done {\n  width: 100%;\n  height: 44px;\n  font-weight: 600;\n  color: #fff;\n  border: none;\n  border-radius: 22px;\n  background: linear-gradient(90deg, var(--color-primary) 0%, #dc2626 100%);\n  opacity: 0.9;\n  cursor: default;\n}\n.checkin-btn-done:hover,\n.checkin-btn-done:focus {\n  color: #fff;\n  border: none;\n  background: linear-gradient(90deg, var(--color-primary) 0%, #dc2626 100%);\n  opacity: 0.9;\n}\n.checkin-btn-done-inline {\n  margin-top: 0;\n}\n\n.ink-exchange-section {\n  margin-top: var(--spacing-lg);\n  padding-top: var(--spacing-lg);\n  border-top: 1px solid var(--border-color-light, #ebeef5);\n  margin-bottom: var(--spacing-lg);\n}\n.ink-exchange-title {\n  font-size: 1.25rem;\n  font-weight: 600;\n  margin: 0 0 var(--spacing-md);\n  color: var(--color-text-primary, #303133);\n}\n.ink-balance {\n  margin-bottom: var(--spacing-md);\n  font-weight: 500;\n}\n.ink-exchange-cards {\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: var(--spacing-md);\n}\n@media (min-width: 768px) {\n  .ink-exchange-cards {\n    grid-template-columns: repeat(3, 1fr);\n    align-items: stretch;\n  }\n}\n.ink-exchange-card {\n  display: flex;\n  flex-direction: column;\n  padding: var(--spacing-md);\n  border: 1px solid var(--border-color-light, #ebeef5);\n  border-radius: 10px;\n  background: var(--el-fill-color-blank, #fff);\n}\n@media (min-width: 768px) {\n  .ink-exchange-card {\n    height: 100%;\n  }\n}\n.ink-card-title {\n  font-size: var(--font-size-base);\n  font-weight: 600;\n  margin-bottom: var(--spacing-xs);\n}\n.ink-card-desc {\n  font-size: var(--font-size-sm);\n  color: var(--color-text-secondary);\n  margin: 0 0 var(--spacing-sm);\n}\n.ink-card-cost {\n  margin-bottom: var(--spacing-sm);\n}\n.ink-cost-num {\n  font-weight: 700;\n  color: #e6a23c;\n  font-size: 1.1em;\n}\n.ink-cost-unit {\n  margin-left: 2px;\n  color: var(--color-text-secondary);\n  font-size: var(--font-size-sm);\n}\n.ink-card-btn {\n  width: 100%;\n  margin-top: auto;\n}\n.ink-hint {\n  font-size: var(--font-size-sm);\n  color: var(--color-text-secondary);\n  margin-top: var(--spacing-sm);\n}\n\n.ink-log-section .ink-balance {\n  margin-bottom: var(--spacing-md);\n}\n.ink-plus {\n  color: var(--el-color-success);\n}\n.ink-minus {\n  color: var(--el-color-danger);\n}\n.ink-log-pagination {\n  margin-top: var(--spacing-md);\n}\n\n.membership-intro {\n  margin-bottom: var(--spacing-lg);\n  padding: var(--spacing-sm) 0;\n  font-size: var(--font-size-sm);\n  color: var(--color-text-secondary);\n}\n.membership-intro .ink-highlight {\n  font-weight: 700;\n  color: #e6a23c;\n}\n.membership-intro .contact-email {\n  color: #e6a23c;\n  text-decoration: underline;\n  cursor: pointer;\n  outline: none;\n}\n.membership-intro .contact-email:hover {\n  opacity: 0.9;\n}\n\n.membership-info-title {\n  font-size: 1.25rem;\n  font-weight: 600;\n  margin: 0 0 var(--spacing-md);\n  color: var(--color-text-primary, #303133);\n}\n.membership-info {\n  padding: var(--spacing-md);\n  margin-bottom: var(--spacing-lg);\n}\n.membership-empty {\n  margin-bottom: var(--spacing-lg);\n}\n.membership-descriptions {\n  border-radius: 8px;\n  overflow: hidden;\n}\n.membership-descriptions .el-descriptions__label {\n  width: 100px;\n  font-weight: 500;\n  color: var(--color-text-secondary);\n}\n.membership-descriptions .el-descriptions__content {\n  color: var(--color-text-primary, #303133);\n}\n\n.membership-redeem {\n  margin-top: var(--spacing-lg);\n  padding-top: var(--spacing-lg);\n  border-top: 1px solid var(--border-color-light, #ebeef5);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.membership-redeem-title {\n  font-size: 1.25rem;\n  font-weight: 600;\n  margin: 0 0 var(--spacing-md);\n  color: var(--color-text-primary, #303133);\n  align-self: flex-start;\n}\n.redeem-box {\n  display: flex;\n  gap: var(--spacing-sm);\n  align-items: center;\n  width: 100%;\n  max-width: 400px;\n}\n.redeem-input {\n  flex: 1;\n  max-width: 280px;\n}\n\n.security-section h4 {\n  margin-bottom: var(--spacing-sm);\n  font-size: var(--font-size-base);\n}\n\n.security-desc {\n  color: var(--color-text-secondary);\n  font-size: var(--font-size-sm);\n  margin-bottom: var(--spacing-md);\n}\n\n.cancel-email-hint {\n  margin: 0 0 var(--spacing-sm);\n  font-size: var(--font-size-sm);\n  color: var(--color-text-secondary);\n}\n\n.cancel-dialog-tip {\n  margin-bottom: var(--spacing-md);\n}\n\n.cancel-code-row {\n  display: flex;\n  gap: var(--spacing-sm);\n  width: 100%;\n}\n.cancel-code-input {\n  flex: 1;\n  min-width: 0;\n}\n\n.password-email-hint {\n  margin: 0 0 var(--spacing-md);\n  font-size: var(--font-size-sm);\n  color: var(--color-text-secondary);\n}\n\n.password-code-row {\n  display: flex;\n  gap: var(--spacing-sm);\n  width: 100%;\n}\n.password-code-input {\n  flex: 1;\n  min-width: 0;\n}\n\n.favorites-list {\n  min-height: 120px;\n}\n\n.favorite-item {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-md);\n  padding: var(--spacing-sm) 0;\n  border-bottom: 1px solid var(--border-color-light, #ebeef5);\n}\n\n.favorite-item:last-child {\n  border-bottom: none;\n}\n\n.favorite-title {\n  flex: 1;\n  min-width: 0;\n  color: var(--color-primary);\n  text-decoration: none;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.favorite-title:hover {\n  text-decoration: underline;\n}\n\n.favorite-time,\n.favorite-meta {\n  flex-shrink: 0;\n  font-size: var(--font-size-sm);\n  color: var(--color-text-secondary);\n}\n\n.favorite-item .el-button {\n  flex-shrink: 0;\n}\n\n/* 小屏时表单 label 改为 80px */\n@media (max-width: 768px) {\n  .profile-page :deep(.profile-form .el-form-item__label) {\n    width: 80px !important;\n  }\n}\n\n/* 收藏表格可左右滑动，与历史记录一致 */\n.table-scroll-wrap {\n  overflow-x: auto;\n  min-height: 120px;\n}\n.profile-table {\n  min-width: 400px;\n}\n.table-link {\n  color: var(--color-primary);\n  text-decoration: none;\n}\n.table-link:hover {\n  text-decoration: underline;\n}\n</style>\n"],"names":["updateUser","data","request","d","membership","getMembership","checkin","getInkDropsLog","params","exchangeByInk","type","redeemMembership","code","sendEmailCodeForMe","cancelAccount","password","emailCode","createFeedback","contactEmail","inkLogPageSize","router","useRouter","route","useRoute","authStore","useAuthStore","activeTab","ref","formRef","passwordFormRef","redeemCode","redeemLoading","exchangeLoading","inkExchangeProducts","copyContactEmail","ElMessage","form","reactive","passwordForm","passwordMaskedEmail","computed","maskEmail","cancelMaskedEmail","hasTimeMember","passwordSendingCode","passwordCountdown","passwordCountdownTimer","feedbackForm","cancelDialogVisible","cancelLoading","cancelSendingCode","cancelCountdown","cancelCountdownTimer","cancelForm","checkinDialogVisible","checkinResult","checkinLoading","lastCheckinWeekCount","hasCheckedInToday","checkinDayRewards","checkinWeekCount","checkinCurrentDayIndex","currentInkDrops","goProfileInkLog","onCheckinDialogClose","inkLogList","inkLogLoading","inkLogPage","inkLogTotal","kindLabels","favorites","favoritesLoading","unfavoriteId","classicFavorites","classicFavoritesLoading","unfavoriteClassicId","rules","passwordRules","_rule","value","callback","handleSendPasswordCode","userApi.sendEmailCodeForMe","error","onMounted","tab","fetchMembership","watch","u","fetchFavorites","fetchClassicFavorites","fetchInkDropsLog","essayApi.getFavorites","handleUnfavorite","item","essayApi.unfavoriteEssay","f","classicApi.getClassicFavorites","handleUnfavoriteClassic","c","classicApi.unfavorite","x","userApi.getMembership","handleUpdateInfo","valid","userApi.updateUser","handleUpdatePassword","handleRedeemCode","userApi.redeemMembership","handleExchangeByInk","cost","msgHtml","p","ElMessageBox","el","userApi.exchangeByInk","res","userApi.getInkDropsLog","onInkLogPageChange","handleCheckin","result","userApi.checkin","weekCount","handleSubmitFeedback","feedbackApi.createFeedback","onCancelDialogClosed","openCancelDialog","handleSendCancelCode","onUnmounted","handleCancelAccount","userApi.cancelAccount","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_el_row","_component_el_col","_component_el_card","_hoisted_3","_component_el_avatar","_createTextVNode","_toDisplayString","_hoisted_4","_hoisted_5","_hoisted_6","_unref","_createBlock","_component_el_tag","_cache","_hoisted_7","_hoisted_8","_hoisted_9","_component_el_button","_normalizeClass","_component_el_dialog","$event","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_component_el_link","_Fragment","_hoisted_14","_renderList","reward","i","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_component_el_tabs","_component_el_tab_pane","_component_el_form","_component_el_form_item","_component_el_input","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_component_el_descriptions","_component_el_descriptions_item","_hoisted_24","_component_el_empty","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_component_el_table","_component_el_table_column","_withCtx","row","_component_el_pagination","_hoisted_37","_component_router_link","$router","_hoisted_38","_hoisted_39","_component_el_alert","_hoisted_40","_hoisted_41"],"mappings":"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"}