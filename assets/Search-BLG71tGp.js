import{d as M,l as n,O as v,C as I,M as K,n as Q,c as a,a as l,b as c,e as u,w as g,y as R,r as i,D as r,F as T,x as U,g as j,f as A,Y as E,o as t,j as L,_ as O}from"./index-DE8jxKp-.js";import{s as Y}from"./classic-DnoLlFHH.js";const $={class:"classic-search-page"},G={class:"search-inner"},H={class:"search-bar"},J={key:0,class:"result-header"},W={key:1,class:"loading-wrap"},X={key:2,class:"empty"},Z={key:3,class:"list-wrap"},ee={class:"original content-font"},te={key:0,class:"translation"},ae={class:"meta"},se={key:0},oe={key:1},ne={key:2},le={key:4,class:"pagination-wrap"},y=20,re=M({__name:"Search",setup(ce){const b=I(),d=n(""),_=n([]),h=n(!1),f=n(!1),C=n(!0),V=n(!0),q=n(!0),p=n(1),m=v(()=>b.query.q??""),k=v(()=>_.value.length),S=v(()=>Math.ceil(k.value/y)||1),z=v(()=>{const o=(p.value-1)*y;return _.value.slice(o,o+y)});async function w(){const o=(d.value||m.value)?.trim();if(o){h.value=!0,f.value=!0;try{const s=await Y(o,"keyword");_.value=s??[],p.value=1}finally{h.value=!1}}}function x(){const o=m.value;o&&(d.value=o,w())}return K(()=>b.query.q,x),Q(x),(o,s)=>{const B=i("el-button"),N=i("el-input"),P=i("el-icon"),D=i("router-link"),F=i("el-pagination");return t(),a("div",$,[s[3]||(s[3]=l("div",{class:"page-bg"},[l("div",{class:"page-bg-image"}),l("div",{class:"page-bg-gradient"})],-1)),l("div",G,[l("div",H,[u(N,{modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=e=>d.value=e),placeholder:"输入关键词搜索",size:"large",clearable:"",class:"input",onKeyup:R(w,["enter"])},{append:g(()=>[u(B,{type:"primary",onClick:w},{default:g(()=>[...s[2]||(s[2]=[j("搜索",-1)])]),_:1})]),_:1},8,["modelValue"])]),f.value?(t(),a("div",J,[l("span",null,"“"+r(m.value)+"” 共 "+r(k.value)+" 条",1)])):c("",!0),h.value?(t(),a("div",W,[u(P,{class:"is-loading",size:32},{default:g(()=>[u(A(E))]),_:1})])):f.value&&_.value.length===0?(t(),a("div",X,"暂无结果")):(t(),a("div",Z,[(t(!0),a(T,null,U(z.value,e=>(t(),L(D,{key:e.id,to:`/classic/item/${e.id}`,class:"item-card"},{default:g(()=>[l("p",ee,r(e.original_text),1),C.value&&e.translation?(t(),a("p",te,r(e.translation),1)):c("",!0),l("div",ae,[V.value&&e.author?(t(),a("span",se,r(e.author),1)):c("",!0),q.value&&e.dynasty?(t(),a("span",oe,r(e.dynasty),1)):c("",!0),e.source?(t(),a("span",ne,r(e.source),1)):c("",!0)])]),_:2},1032,["to"]))),128))])),S.value>1?(t(),a("div",le,[u(F,{"current-page":p.value,"onUpdate:currentPage":s[1]||(s[1]=e=>p.value=e),"page-size":y,total:k.value,layout:"prev, pager, next",onCurrentChange:()=>{}},null,8,["current-page","total"])])):c("",!0)])])}}}),de=O(re,[["__scopeId","data-v-d3855c4b"]]);export{de as default};
//# sourceMappingURL=Search-BLG71tGp.js.map
