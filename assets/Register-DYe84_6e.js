import{d as C,u as E,l as c,m as R,c as U,a as m,e as r,w as l,r as n,q,f as u,H as A,I as B,t as N,z as v,y as S,g as i,E as V,A as $,o as I,_ as K}from"./index-BeVUFvTo.js";const M={class:"register-page"},H={class:"register-container"},T=C({__name:"Register",setup(j){const y=$(),x=E(),p=c(),f=c(!1),o=R({email:"",phone:"",nickname:"",password:"",confirmPassword:"",agreement:!1}),b={email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],phone:[{validator:(d,e,a)=>{if(!e||!e.trim()){a();return}/^1[3-9]\d{9}$/.test(e.trim())?a():a(new Error("请输入正确的手机号格式"))},trigger:"blur"}],nickname:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:2,max:20,message:"昵称长度在2到20个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(d,e,a)=>{e!==o.password?a(new Error("两次输入的密码不一致")):a()},trigger:"blur"}],agreement:[{validator:(d,e,a)=>{e?a():a(new Error("请先同意服务条款"))},trigger:"change"}]};async function g(){p.value&&await p.value.validate(async d=>{if(d){f.value=!0;try{await x.register({email:o.email,phone:o.phone||void 0,password:o.password,nickname:o.nickname}),V.success("注册成功，请登录"),y.push("/login")}catch(e){V.error(e.message||"注册失败")}finally{f.value=!1}}})}return(d,e)=>{const a=n("el-input"),t=n("el-form-item"),_=n("el-link"),k=n("el-checkbox"),w=n("el-button"),P=n("el-divider"),z=n("el-form"),h=n("el-card");return I(),U("div",M,[m("div",H,[r(h,{class:"register-card",shadow:"always"},{header:l(()=>[...e[7]||(e[7]=[m("div",{class:"card-header"},[m("h2",null,"注册"),m("p",{class:"subtitle"},"创建你的账号")],-1)])]),default:l(()=>[r(z,{ref_key:"formRef",ref:p,model:o,rules:b,"label-width":"0",onSubmit:q(g,["prevent"])},{default:l(()=>[r(t,{prop:"email"},{default:l(()=>[r(a,{modelValue:o.email,"onUpdate:modelValue":e[0]||(e[0]=s=>o.email=s),placeholder:"邮箱",size:"large","prefix-icon":u(A)},null,8,["modelValue","prefix-icon"])]),_:1}),r(t,{prop:"phone"},{default:l(()=>[r(a,{modelValue:o.phone,"onUpdate:modelValue":e[1]||(e[1]=s=>o.phone=s),placeholder:"手机号（可选）",size:"large","prefix-icon":u(B)},null,8,["modelValue","prefix-icon"])]),_:1}),r(t,{prop:"nickname"},{default:l(()=>[r(a,{modelValue:o.nickname,"onUpdate:modelValue":e[2]||(e[2]=s=>o.nickname=s),placeholder:"昵称",size:"large","prefix-icon":u(N)},null,8,["modelValue","prefix-icon"])]),_:1}),r(t,{prop:"password"},{default:l(()=>[r(a,{modelValue:o.password,"onUpdate:modelValue":e[3]||(e[3]=s=>o.password=s),type:"password",placeholder:"密码（至少6位）",size:"large","prefix-icon":u(v),"show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),r(t,{prop:"confirmPassword"},{default:l(()=>[r(a,{modelValue:o.confirmPassword,"onUpdate:modelValue":e[4]||(e[4]=s=>o.confirmPassword=s),type:"password",placeholder:"确认密码",size:"large","prefix-icon":u(v),"show-password":"",onKeyup:S(g,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),r(t,{prop:"agreement"},{default:l(()=>[r(k,{modelValue:o.agreement,"onUpdate:modelValue":e[5]||(e[5]=s=>o.agreement=s)},{default:l(()=>[e[10]||(e[10]=i(" 我已阅读并同意 ",-1)),r(_,{type:"primary",underline:!1},{default:l(()=>[...e[8]||(e[8]=[i("《服务条款》",-1)])]),_:1}),e[11]||(e[11]=i(" 和 ",-1)),r(_,{type:"primary",underline:!1},{default:l(()=>[...e[9]||(e[9]=[i("《隐私政策》",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),r(t,null,{default:l(()=>[r(w,{type:"primary",size:"large",loading:f.value,class:"register-button",onClick:g},{default:l(()=>[...e[12]||(e[12]=[i(" 注册 ",-1)])]),_:1},8,["loading"])]),_:1}),r(P,null,{default:l(()=>[...e[13]||(e[13]=[i("或",-1)])]),_:1}),r(t,null,{default:l(()=>[r(w,{size:"large",class:"login-button",onClick:e[6]||(e[6]=s=>d.$router.push("/login"))},{default:l(()=>[...e[14]||(e[14]=[i(" 已有账号？登录 ",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])])}}}),L=K(T,[["__scopeId","data-v-58906308"]]);export{L as default};
//# sourceMappingURL=Register-DYe84_6e.js.map
